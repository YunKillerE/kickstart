++ ifconfig
++ grep HWaddr
++ head -n1
++ grep -P -o '([0-9A-F]{2}:){5}[0-9A-F]{2}'
+ pxe_mac=6C:92:BF:05:E1:B1
++ dmidecode -s system-serial-number
++ grep -v '^#'
++ sed 's/ //g'
+ tmp_sn=214202338
+ hostname NGIS-214202338
+ KS=
++ /sbin/ifconfig
++ grep 'inet addr'
++ grep -v 127.0.0.1
++ grep -v 255.255.255.255
++ awk '{print $2}'
++ awk -F: '{print $2}'
+ DHCPIP=10.120.109.200
++ grep -o 'KS=[0-9.]*' /proc/cmdline
++ awk -F= '{print $2}'
10.120.109.155
+ KS=10.120.109.155
+ echo 10.120.109.155
+ echo UPDATE_AGENT
UPDATE_AGENT
+ '[' X10.120.109.155 = X ']'
+ /etc/init.d/ntpd stop
Shutting down ntpd: [60G[[0;31mFAILED[0;39m]
+ ntpdate 110.75.12.74
17 Jul 14:31:04 ntpdate[8448]: no servers can be used, exiting
+ ntpdate 10.120.109.155
17 Jul 14:31:08 ntpdate[8449]: no server suitable for synchronization found
+ mkdir /mnt/nfs
+ mount -o nolock 10.120.109.155:/home/ngis/nfs /mnt/nfs
+ /usr/bin/wget -T3 -t2 http://10.120.109.155:8888/ngis/script/ngis.tgz -O /root/ngis.tgz
--2014-07-17 14:31:08--  http://10.120.109.155:8888/ngis/script/ngis.tgz
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 200 OK
Length: 30199 (29K) [application/x-gzip]
Saving to: `/root/ngis.tgz'

     0K .......... .......... .........                       100% 9.19M=0.003s

2014-07-17 14:31:08 (9.19 MB/s) - `/root/ngis.tgz' saved [30199/30199]

+ cd /root
+ tar -xzf ngis.tgz
+ yum clean all
Cleaning up Everything
+ cd /root/
+ grep -q ALinstall /proc/cmdline
+ grep -q ALcmdline /proc/cmdline
+ bash -x /root/ngis_install.sh
+ set -x
+ cd /root/
+ echo START_TIME
START_TIME
+ date
Thu Jul 17 14:31:08 EDT 2014
+ lsscsi
[7:0:0:0]    disk    ATA      INTEL SSDSC2BB48 0370  /dev/sda 
[7:0:1:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdb 
[7:0:2:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdc 
[7:0:3:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdd 
[7:0:4:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sde 
[7:0:5:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdf 
[7:0:6:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdg 
[7:0:7:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdh 
[7:0:8:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdi 
[7:0:9:0]    disk    ATA      HGST HUS724020AL AB70  /dev/sdj 
[7:0:10:0]   disk    ATA      INTEL SSDSC2BB48 0370  /dev/sdk 
[7:0:11:0]   disk    ATA      INTEL SSDSC2BB48 0370  /dev/sdl 
[7:0:12:0]   enclosu LSI CORP Bobcat           0800  -       
+ cat /proc/cmdline
initrd=linux/ngis/ngis.initrd ALcmdline ALos=rh62-x86-64 KS=10.120.109.155 BOOT_IMAGE=linux/ngis/ngis.kernel 
+ '[' -e /root/ngis_function.sh ']'
+ source /root/ngis_function.sh
+ yumCONF=/root/yum_conf
+ SYSIMAGE=/mnt/sysimage
+ E_flag=
+ E_file=/tmp/install_E_flag
+ W_file=/root/install_warn.log
+ Install_log=/root/install.log
+ Post_log=/root/post.log
+ rm -f /tmp/install_E_flag
+ :
+ :
+ PATH=/sbin:/usr/sbin:/bin:/usr/bin:/usr/alisys/dragoon/libexec/
++ /sbin/ifconfig
++ grep 'inet addr'
++ grep -v 127.0.0.1
++ grep -v 255.255.255.255
++ awk '{print $2}'
++ awk -F: '{print $2}'
++ sed -n 1p
+ DHCPIP=10.120.109.200
+ IP16=
+ get_net 10.120.109.200
+ '[' 1 -ne 1 ']'
+ ip=10.120.109.200
++ echo 10.120.109.200
++ awk -F. '{print $1}'
+ ip1=10
++ echo 10.120.109.200
++ awk -F. '{print $2}'
+ ip2=120
++ echo 10.120.109.200
++ awk -F. '{print $3}'
+ ip3=109
++ echo 'obase=16; ibase=10; 10'
++ bc
+ ip161=A
+ '[' 1 -eq 1 ']'
+ ip161=0A
++ echo 'obase=16; ibase=10; 120'
++ bc
+ ip162=78
+ '[' 2 -eq 1 ']'
++ echo 'obase=16; ibase=10; 109'
++ bc
+ ip163=6D
+ '[' 2 -eq 1 ']'
+ IP16=0A786D
+ SERVICETAG=
++ /usr/sbin/dmidecode -s system-serial-number
++ grep -v '^#'
++ sed 's/ //g'
+ SERVICETAG=214202338
+ echo 214202338
+ grep -i ToBeFilled
+ echo 214202338
+ grep -i ToBeFilled
+ export W_KS=
+ W_KS=
+ KS=
+ ALSITE=
+ get_site 0A786D
+ '[' 1 -ne 1 ']'
++ echo 0A786D
++ cut -c1-5
+ siteX=0A786
+ case "${siteX}" in
+ KS=172.30.26.220
+ W_KS=ngis.alidc.net
+ ping -c2 -w4 ngis.alidc.net
ping: unknown host ngis.alidc.net
+ W_KS=172.30.26.220
+ MAC=
+ get_mac
+ MAC=(`dmesg | grep -P '^eth'| grep -o -P '([0-9a-f][0-9a-f]:){5}[0-9a-f]{2}'`)
++ dmesg
++ grep -P '^eth'
++ grep -o -P '([0-9a-f][0-9a-f]:){5}[0-9a-f]{2}'
+ ETH0=
+ ETH1=
+ get_eth 10.120.109.200
+ '[' 1 -ne 1 ']'
+ ethtool -i eth0
+ grep ixg
++ ifconfig
++ grep -B1 10.120.109.200
++ head -n1
++ grep -o 'eth[0-9]*'
+ local ipeth=eth2
+ case $ipeth in
+ ETH0=eth2
+ ETH1=eth3
++ ifconfig eth2
++ grep -o -P '([0-9a-fA-F][0-9a-fA-F]:){5}[0-9a-fA-F]{2}'
++ grep eth2
+ ETH0_MAC=6C:92:BF:04:06:24
++ ifconfig eth3
++ grep eth3
++ grep -o -P '([0-9a-fA-F][0-9a-fA-F]:){5}[0-9a-fA-F]{2}'
+ ETH1_MAC=6C:92:BF:04:06:25
++ ifconfig
++ grep -B1 10.120.109.200
++ grep -o 'eth[0-9]*'
++ head -n1
+ DHCPETH=eth2
++ grep -o 'KS=[0-9.]*' /proc/cmdline
++ awk -F= '{print $2}'
+ KS=10.120.109.155
+ W_KS=10.120.109.155
+ export DISK=
+ DISK=
+ export DISKP=
+ DISKP=
+ '[' -e /root/00pre_ngis_install.sh ']'
+ source /root/00pre_ngis_install.sh
++ /etc/init.d/ntpd stop
++ ntpdate 172.22.5.147
17 Jul 14:31:09 ntpdate[8935]: no servers can be used, exiting
++ ntpdate 172.18.252.2
17 Jul 14:31:09 ntpdate[8936]: no servers can be used, exiting
++ ntpdate 172.18.111.60
17 Jul 14:31:09 ntpdate[8937]: no servers can be used, exiting
++ '[' X214202338 = X ']'
++ hostname NGIS-214202338
++ /etc/init.d/DragoonAgent restart
++ echo NGIS_SHELL_FLAG
++ ls /root/
+ source /root/01wait_install.sh
++ '[' -e /root/214202338 ']'
++ get_install_conf
++ '[' -e /mnt/nfs/sn2hosts ']'
++ cp -f /mnt/nfs/sn2hosts /tmp/
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $1}'
+++ sed 's/ //g'
++ local tmp_SN=214202338
+++ echo 214202338
+++ tr a-z A-Z
++ local ltmp_sn=214202338
++ '[' X214202338 = X214202338 -o X214202338 = X214202338 ']'
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $2}'
+++ sed 's/ //g'
++ alhn=cache11.cn109
+++ echo cache11.cn109
+++ awk -F. 'BEGIN{OFS="."}{$1="";print}'
++ aldomain=.cn109
+++ echo .cn109
+++ cut -c2-
++ aldomain=cn109
+++ echo cache11.cn109
+++ awk -F. '{print $1}'
++ alhn=cache11
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $3}'
+++ sed 's/ //g'
++ alip=61.183.52.211
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $6}'
+++ sed 's/ //g'
++ alpart=ALdefault
++ [[ cache11 =~ cache ]]
++ alpart=ALcache
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $4}'
+++ sed 's/ //g'
++ alos=rh62-x86-64
+++ echo cache11
+++ awk -F. '{print $1}'
++ alhn=cache11
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $5}'
+++ sed 's/ //g'
++ NETMOD=NOBOND
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $7}'
+++ sed 's/ //g'
++ ALDISK=/dev/sda
+++ grep 214202338 /tmp/sn2hosts
+++ awk '{print $8}'
+++ sed 's/ //g'
++ OOB=10.120.109.211
++ '[' X = X -o X = Xnull ']'
+++ echo cache11
+++ tr -d 0-9
++ albigapp=cache_server
++ echo ALOS=rh62-x86-64
++ echo ALIP=61.183.52.211
++ echo ALHN=cache11
++ echo ALPART=ALcache
++ echo ALBIGAPP=cache_server
++ echo ALDOMAIN=cn109
++ echo ALROOM=cn109
++ echo ALSERVICETAG=214202338
++ echo ALSITE=cn109
++ echo NETMOD=NOBOND
++ '[' X/dev/sda '!=' X ']'
++ echo ALDISK=/dev/sda
++ echo OOB=10.120.109.211
++ '[' -e /mnt/nfs/node.conf ']'
++ cp -f /mnt/nfs/node.conf /tmp/
++ cat /tmp/node.conf
++ mv -f /root/214202338 /tmp/
++ cat /tmp/214202338
++ bash -x /root/ILO_LICENSE.sh
+ get_PN
++ dmidecode -s system-product-name
++ grep -v '^#'
++ sed 's/ *$//g'
+ PRONAME=NF5270M3
+ '[' XNF5270M3 == X ']'
+ echo NF5270M3
+ grep -qi IBM
+ echo -n NF5270M3
+ return 0
+ case $PRONAME in
++ '[' -e /root/214202338 ']'
++ grep -q -P ALinstall /proc/cmdline
++ grep -q ALcmdline /proc/cmdline
++ '[' -e /root/214202338 ']'
++ mv -vf /tmp/214202338 /root/214202338
++ :
++ progress start_ngis_install.sh 1
++ :
+ fdisk -l
+ grep -q /dev/sda
Disk /dev/sda doesn't contain a valid partition table
Disk /dev/sdb doesn't contain a valid partition table
Disk /dev/sdc doesn't contain a valid partition table
Disk /dev/sdd doesn't contain a valid partition table
Disk /dev/sde doesn't contain a valid partition table
Disk /dev/sdf doesn't contain a valid partition table
Disk /dev/sdg doesn't contain a valid partition table
Disk /dev/sdh doesn't contain a valid partition table
Disk /dev/sdi doesn't contain a valid partition table
Disk /dev/sdj doesn't contain a valid partition table
Disk /dev/sdk doesn't contain a valid partition table
Disk /dev/sdl doesn't contain a valid partition table
+ DISK=/dev/sda
+ '[' /dev/sda == '' ']'
+ '[' /dev/sda == '' ']'
+ lspci
+ grep 'SAS *1068'
+ dmidecode -s system-product-name
+ sed 's/ //g'
+ grep ProLiantDL180G6
+ '[' X/dev/sda '!=' X ']'
+ DISK=/dev/sda
+ DISKP=/dev/sda
+ echo /dev/sda
+ grep -q -P 'sd|hd'
++ fdisk -l /dev/sda
++ grep Disk
++ sed -n '/\/dev\/[^:]*/p'
++ sed -r 's@.*/dev/[^:]*: *([0-9]*).*GB.*@\1@'
Disk /dev/sda doesn't contain a valid partition table
+ DISK_SIZE=480
+ '[' X/dev/sda = X ']'
+ ALDOMAIN=
+ ALOWN0=
+ ALOWN1=
+ ALBIGAPP=
+ ALAPP=
+ ALOS=
+ ALOSr=
+ ALIP=
+ ALHOSTNAME=
+ armory_SN=
+ ALPART=NONO
+ PART_FLAG=None
+ source /root/02get_install_conf.sh
++ cp -f /mnt/nfs/resolv.conf /root/resolv.conf
++ cp -f /mnt/nfs/hosts /root/hosts
++ echo ALSERVICETAG=214202338
++ '[' '' '!=' '' ']'
++ echo KS=10.120.109.155
++ echo DHCPETH=eth2
++ j=0
++ cat /root/214202338
++ sort
++ uniq
++ mv -f /root/214202338.bak /root/214202338
++ echo DISK_SIZE=480
++ source /root/214202338
+++ ALBIGAPP=cache_server
+++ ALDISK=/dev/sda
+++ ALDOMAIN=cn109
+++ ALHN=cache11
+++ ALIP=61.183.52.211
+++ ALOS=rh62-x86-64
+++ ALPART=ALcache
+++ ALROOM=cn109
+++ ALSERVICETAG=214202338
+++ ALSITE=cn109
+++ DHCPETH=eth2
+++ GATEWAY=61.183.52.247
+++ IPPOOL=61.183.52.128/25
+++ IVIP1=61.183.52.240
+++ IVIP2=61.183.52.250
+++ KS=10.120.109.155
+++ NETMASK=255.255.255.128
+++ NETMOD=NOBOND
+++ OOB=10.120.109.211
+++ WVIP1=61.183.52.241
+++ WVIP2=61.183.52.251
+++ WVIP3=61.183.52.242
+++ WVIP4=61.183.52.252
+++ WVIP5=61.183.52.243
+++ WVIP6=61.183.52.253
+++ DISK_SIZE=480
+++ echo rh62-x86-64
+++ cut -c3
++ export ALOSr=6
++ ALOSr=6
++ export ALHOSTNAME=cache11
++ ALHOSTNAME=cache11
++ '[' XALcache = XALpg ']'
+++ sed -n /ALARMORYSN=/p /root/214202338
+++ grep -o '=.*'
+++ cut -c2-
++ export armory_SN=
++ armory_SN=
++ '[' X61.183.52.211 = X ']'
++ '[' Xcache11 = X ']'
++ echo cache11
++ grep NGIS-
++ '[' Xrh62-x86-64 = X -o X61.183.52.211 = X -o Xcache11 = X -o XALcache = X ']'
++ progress get_install_parameters_ok 3
++ :
+++ dmidecode -s system-product-name
+++ sed 's/ //g'
++ PN=NF5270M3
++ '[' X/dev/sda = X ']'
++ echo ETH0=eth2
++ echo ETH0_MAC=6C:92:BF:04:06:24
++ echo ETH1=eth3
++ echo ETH1_MAC=6C:92:BF:04:06:25
++ '[' ALcache = ALmd ']'
++ echo_conf
++ echo ALL_ENDparametersis:
++ echo END_PATH:/sbin:/usr/sbin:/bin:/usr/bin:/usr/alisys/dragoon/libexec/
++ echo END_DHCPIP:10.120.109.200
++ echo END_IP16:0A786D
++ echo END_SERVICETAG:214202338
++ echo END_W_KS:10.120.109.155
++ echo END_KS:10.120.109.155
++ echo END_ALSITE:cn109
++ echo END_MAC:
++ echo END_DISK:/dev/sda
++ echo END_DISKP:/dev/sda
++ echo END_ALDOMAIN:cn109
++ echo EDN_ALOWN0:
++ echo END_ALOWN1:
++ echo END_ALBIGAPP:cache_server
++ echo END_ALAPP:
++ echo END_ALOS:rh62-x86-64
++ echo END_ALOSr:6
++ echo END_ALIP:61.183.52.211
++ echo END_ALHOSTNAME:cache11
++ echo END_armory_SN:
++ echo END_ALPART:ALcache
++ echo END_W_KS:10.120.109.155
++ echo ALROOT:cn109
++ '[' X/dev/sda = X ']'
++ get_network_mode
++ :
++ '[' cn109 '!=' ALinc ']'
++ check_ip_net
++ '[' X10.120.109.200 = X ']'
+++ ipcalc -n 10.120.109.200 255.255.255.128
+++ awk -F= '{print $2}'
+++ sed 's/ //g'
++ ip_net_local=10.120.109.128
+++ ipcalc -n 61.183.52.211 255.255.255.128
+++ awk -F= '{print $2}'
+++ sed 's/ //g'
++ ip_net_later=61.183.52.128
++ echo 61.183.52.128
++ grep -P '10.201.66|10.201.68|10.200.208|10.200.209|10.200.250|10.129.209|10.129.208'
++ echo ALcache
++ awk -F_ '{print $2}'
++ grep -i recover
++ echo RECOVER=NO
+++ echo ALcache
+++ awk -F_ '{print $1}'
++ ALPART=ALcache
++ sed -i 's/ALPART=.*/ALPART=ALcache/g' /root/214202338
+++ fdisk -l
+++ grep -o '/dev/sd[a-z][0-9]*'
+++ grep -v /dev/sda
Disk /dev/sda doesn't contain a valid partition table
Disk /dev/sdb doesn't contain a valid partition table
Disk /dev/sdc doesn't contain a valid partition table
Disk /dev/sdd doesn't contain a valid partition table
Disk /dev/sde doesn't contain a valid partition table
Disk /dev/sdf doesn't contain a valid partition table
Disk /dev/sdg doesn't contain a valid partition table
Disk /dev/sdh doesn't contain a valid partition table
Disk /dev/sdi doesn't contain a valid partition table
Disk /dev/sdj doesn't contain a valid partition table
Disk /dev/sdk doesn't contain a valid partition table
Disk /dev/sdl doesn't contain a valid partition table
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdb
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdb
Couldn't find valid filesystem superblock.
++ e4label /dev/sdb
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdb
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdc
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdc
Couldn't find valid filesystem superblock.
++ e4label /dev/sdc
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdc
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdd
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdd
Couldn't find valid filesystem superblock.
++ e4label /dev/sdd
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdd
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sde
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sde
Couldn't find valid filesystem superblock.
++ e4label /dev/sde
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sde
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdf
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdf
Couldn't find valid filesystem superblock.
++ e4label /dev/sdf
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdf
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdg
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdg
Couldn't find valid filesystem superblock.
++ e4label /dev/sdg
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdg
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdh
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdh
Couldn't find valid filesystem superblock.
++ e4label /dev/sdh
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdh
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdi
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdi
Couldn't find valid filesystem superblock.
++ e4label /dev/sdi
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdi
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdj
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdj
Couldn't find valid filesystem superblock.
++ e4label /dev/sdj
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdj
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdk
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdk
Couldn't find valid filesystem superblock.
++ e4label /dev/sdk
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdk
Couldn't find valid filesystem superblock.
++ for i in '`fdisk -l|grep -o '\''/dev/sd[a-z][0-9]*'\''|grep -v $DISK 2>/dev/null`'
++ e2label /dev/sdl
++ grep -P '/|/boot|/var|/tmp|/usr'
e2label: Bad magic number in super-block while trying to open /dev/sdl
Couldn't find valid filesystem superblock.
++ e4label /dev/sdl
++ grep -P '/|/boot|/var|/tmp|/usr'
e4label: Bad magic number in super-block while trying to open /dev/sdl
Couldn't find valid filesystem superblock.
++ cp -f /root/214202338 /
+++ lspci -n
+++ grep 0200
+++ wc -l
++ ETHNUM=4
++ '[' 4 -gt 2 ']'
++ echo MACBOND=YES
+ source /root/04get_oob_console_tty.sh
+++ get_PN
++++ dmidecode -s system-product-name
++++ grep -v '^#'
++++ sed 's/ *$//g'
+++ PRONAME=NF5270M3
+++ echo NF5270M3
++ Proname=NF5270M3
+++ get_SN
+++ dmidecode -s system-serial-number
+++ grep -v '^#'
+++ sed 's/ //g'
+++ echo
+++ grep -i ToBeFilled
++ SN=214202338
+++ get_MANU
+++ dmidecode -s system-manufacturer
+++ grep -v '^#'
+++ sed 's/ //g'
++ Manu=Inspur
++ get_TTYS
++ case $Proname in
++ FSBR=ERROR
++ CONSOLE=ERROR
++ IPMILANCHANNEL=ERROR
++ echo 'NF5270M3 Not support now,Plz connect to shoukun.taosk@alibaba-inc.com'
++ echo 'NF5270M3 Not support now,Plz connect to shoukun.taosk@alibaba-inc.com'
++ echo FSBR:ERROR
++ echo CONSOLE:ERROR
++ echo IPMILANCHANNEL:ERROR
++ echo FSBR=ERROR
++ echo CONSOLE=ERROR
++ echo IPMILANCHANNEL=ERROR
+ source /root/40format.sh
++ progress start_format_disk 15
++ :
++ umount -l /mnt/sysimage/boot/
umount: /mnt/sysimage/boot/: not found
++ umount -l /mnt/sysimage/usr/
umount: /mnt/sysimage/usr/: not found
++ umount -l /mnt/sysimage/home/
umount: /mnt/sysimage/home/: not found
++ umount -l /mnt/sysimage/tmp/
umount: /mnt/sysimage/tmp/: not found
++ umount -l /mnt/sysimage/var/
umount: /mnt/sysimage/var/: not found
++ umount -l /mnt/sysimage/
umount: /mnt/sysimage/: not mounted
++ umount -al
+++ sfdisk -s
+++ awk -F : '$2>50000000 && $1~/dev/{sub("/dev/","",$1);print $1}'
+++ sort
++ ADISK='sda
sdb
sdc
sdd
sde
sdf
sdg
sdh
sdi
sdj
sdk
sdl'
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sda count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.00023 seconds, 4.5 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdb count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000158 seconds, 6.5 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdc count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000156 seconds, 6.6 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdd count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000157 seconds, 6.5 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sde count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000163 seconds, 6.3 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdf count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000155 seconds, 6.6 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdg count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000155 seconds, 6.6 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdh count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000155 seconds, 6.6 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdi count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000159 seconds, 6.4 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdj count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000156 seconds, 6.6 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdk count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000242 seconds, 4.2 MB/s
++ for i in '$ADISK'
++ dd if=/dev/zero of=/dev/sdl count=1 bs=1024
1+0 records in
1+0 records out
1024 bytes (1.0 kB) copied, 0.000244 seconds, 4.2 MB/s
+++ lvdisplay -c
+++ awk -F: '{print $1}'
+++ vgdisplay -c
+++ awk -F: '{print $1}'
+++ pvdisplay -c
+++ awk -F: '{print $1}'
+++ seq 1 20
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 1
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 2
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 3
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 4
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 5
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 6
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 7
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 8
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 9
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 10
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 11
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 12
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 13
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 14
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 15
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 16
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 17
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 18
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 19
++ for i in '`seq 1 20`'
++ parted /dev/sda rm 20
++ rm -rf /dev/VolGroup00
++ vgdisplay
++ grep -i -q VolGroup00
++ partprobe
+ '[' -e /root/45ALcache_part.sh ']'
+ source /root/45ALcache_part.sh
++ '[' ALcache '!=' ALcache -o None '!=' None ']'
++ progress start_fdisk_/dev/sda 20
++ :
++ '[' 480 -gt 2300 ']'
++ '[' 480 -gt 310 ']'
++ ROOT_SIZE=20480
++ echo cache_server
++ grep xen_server
++ fdisk_part /dev/sda
++ fdisk /dev/sda
Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel
Building a new DOS disklabel. Changes will remain in memory only,
until you decide to write them. After that, of course, the previous
content won't be recoverable.


The number of cylinders for this disk is set to 58369.
There is nothing wrong with that, but this is larger than 1024,
and could in certain setups cause problems with:
1) software that runs at boot time (e.g., old versions of LILO)
2) booting and partitioning software from other OSs
   (e.g., DOS FDISK, OS/2 FDISK)
Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)
++ sleep 5
++ partprobe
++ echo rh62-x86-64
++ grep 'rh6[0-9]'
++ sleep 3
++ '[' -e /dev/sda3 ']'
++ for i in 1 2 5
++ progress /dev/sda1 30
++ :
++ mkfs.ext4 /dev/sda1
mke4fs 1.41.5 (23-Apr-2009)
++ '[' 0 '!=' 0 ']'
++ tune2fs -o acl /dev/sda1
tune2fs: Filesystem has unsupported feature(s) while trying to open /dev/sda1
Couldn't find valid filesystem superblock.
++ tune2fs -c -1 -i 0 /dev/sda1
tune2fs: Filesystem has unsupported feature(s) while trying to open /dev/sda1
Couldn't find valid filesystem superblock.
++ for i in 1 2 5
++ progress /dev/sda2 30
++ :
++ mkfs.ext4 /dev/sda2
mke4fs 1.41.5 (23-Apr-2009)
++ '[' 0 '!=' 0 ']'
++ tune2fs -o acl /dev/sda2
tune2fs: Filesystem has unsupported feature(s) while trying to open /dev/sda2
Couldn't find valid filesystem superblock.
++ tune2fs -c -1 -i 0 /dev/sda2
tune2fs: Filesystem has unsupported feature(s) while trying to open /dev/sda2
Couldn't find valid filesystem superblock.
++ for i in 1 2 5
++ progress /dev/sda5 30
++ :
++ mkfs.ext4 /dev/sda5
mke4fs 1.41.5 (23-Apr-2009)
++ '[' 0 '!=' 0 ']'
++ tune2fs -o acl /dev/sda5
tune2fs: Filesystem has unsupported feature(s) while trying to open /dev/sda5
Couldn't find valid filesystem superblock.
++ tune2fs -c -1 -i 0 /dev/sda5
tune2fs: Filesystem has unsupported feature(s) while trying to open /dev/sda5
Couldn't find valid filesystem superblock.
++ e4label /dev/sda1 /boot
++ e4label /dev/sda2 /
++ e4label /dev/sda5 /home
++ mkswap -L SWAP /dev/sda3
++ PART_FLAG=Done
++ echo FDISK_FLAG
++ fdisk -l
Disk /dev/sdb doesn't contain a valid partition table
Disk /dev/sdc doesn't contain a valid partition table
Disk /dev/sdd doesn't contain a valid partition table
Disk /dev/sde doesn't contain a valid partition table
Disk /dev/sdf doesn't contain a valid partition table
Disk /dev/sdg doesn't contain a valid partition table
Disk /dev/sdh doesn't contain a valid partition table
Disk /dev/sdi doesn't contain a valid partition table
Disk /dev/sdj doesn't contain a valid partition table
Disk /dev/sdk doesn't contain a valid partition table
Disk /dev/sdl doesn't contain a valid partition table
++ mount
+ cd /root/
++ ls 50mkos_dir.sh 52install_ostar.sh 53create_fstab.sh 54create_yumconf.sh 70pre_chroot.sh 71chroot_post.sh 80ngis_install_post.sh
+ for i in '`ls [5-9]*.sh`'
+ source /root/50mkos_dir.sh
+ tee -a /root/install.log
++ progress mk_and_mount_dir 40
++ :
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/proc /proc/mounts
++ echo '/mnt/sysimage/proc does not mount'
/mnt/sysimage/proc does not mount
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/sys /proc/mounts
++ echo '/mnt/sysimage/sys does not mount'
/mnt/sysimage/sys does not mount
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/dev /proc/mounts
++ echo '/mnt/sysimage/dev does not mount'
/mnt/sysimage/dev does not mount
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/selinux /proc/mounts
++ echo '/mnt/sysimage/selinux does not mount'
/mnt/sysimage/selinux does not mount
++ '[' XALcache = XNONO -o XALcache = XALmysql ']'
++ '[' XALcache = XALxen ']'
++ '[' XALcache = XALoracle ']'
++ '[' XALcache = XALdb -o XALcache = XALdbtest ']'
++ '[' XALcache = XALdefault -o XALcache = XALcache -o XALcache = XALqdyunti ']'
++ mount_default_dir
++ mkdir -p /mnt/sysimage
++ mount /dev/sda2 /mnt/sysimage
++ mkdir /mnt/sysimage/boot
++ mount /dev/sda1 /mnt/sysimage/boot
++ mkdir /mnt/sysimage/home
++ mount /dev/sda5 /mnt/sysimage/home
++ '[' XALcache = XALhmxen ']'
++ '[' XALcache = XALmd ']'
++ mkdir -p /mnt/sysimage/etc
++ mkdir -p /mnt/sysimage/sys
++ mkdir -p /mnt/sysimage/dev
++ mkdir -p /mnt/sysimage/proc
++ mkdir -p /mnt/sysimage/selinux
++ mkdir -p /mnt/sysimage/var/lib/rpm
++ mkdir -p /mnt/sysimage/var/lib/yum
++ mkdir -p /mnt/sysimage/var/lock
++ mkdir -p /mnt/sysimage/initrd
++ mount --bind /proc/ /mnt/sysimage/proc/
++ mount --bind /sys/ /mnt/sysimage/sys/
++ mount --bind /dev/ /mnt/sysimage/dev/
++ mount --bind /selinux/ /mnt/sysimage/selinux/
++ echo MOUNT_FLAG
MOUNT_FLAG
++ mount
proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
/dev/sda2 on /mnt/sysimage type ext4 (rw)
/dev/sda1 on /mnt/sysimage/boot type ext4 (rw)
/dev/sda5 on /mnt/sysimage/home type ext4 (rw)
/proc on /mnt/sysimage/proc type none (rw,bind)
/sys on /mnt/sysimage/sys type none (rw,bind)
/dev on /mnt/sysimage/dev type none (rw,bind)
/selinux on /mnt/sysimage/selinux type none (rw,bind)
++ mount
++ grep -q /mnt/sysimage
++ :
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls [5-9]*.sh`'
+ source /root/52install_ostar.sh
+ tee -a /root/install.log
++ progress start_wget_os_tgz 45
++ :
++ case $ALBIGAPP in
++ W_OS=rh62-x86-64
++ touch /mnt/sysimage/filesystemtest
++ rm -f /mnt/sysimage/filesystemtest
++ wget -nv -T5 -t5 http://10.120.109.155:8888/ngis/ostar/rh62-x86-64.tgz -P /mnt/sysimage/
2014-07-17 14:32:04 URL:http://10.120.109.155:8888/ngis/ostar/rh62-x86-64.tgz [656689869/656689869] -> "/mnt/sysimage/rh62-x86-64.tgz" [1]
++ '[' 0 -ne 0 ']'
++ cd /mnt/sysimage
++ md5sum rh62-x86-64.tgz
e41a8b7e25055529f9b1b2df24c91581  rh62-x86-64.tgz
++ progress start_tar_os_tgz 50
++ :
++ echo install_system...........rh62-x86-64.....
install_system...........rh62-x86-64.....
++ tar -xzpf rh62-x86-64.tgz
++ echo OSTAR_FLAG
OSTAR_FLAG
++ ls /mnt/sysimage -h
bin
boot
cgroup
dev
etc
home
initrd
lib
lib64
lost+found
media
mnt
opt
proc
rh62-x86-64.tgz
root
sbin
selinux
srv
sys
tmp
usr
var
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls [5-9]*.sh`'
+ source /root/53create_fstab.sh
+ tee -a /root/install.log
++ progress create_fstab 55
++ :
++ rm -f /mnt/sysimage/etc/mtab
++ rm -f /mnt/sysimage/etc/fstab
++ touch /mnt/sysimage/etc/mtab
++ touch /mnt/sysimage/etc/fstab
++ '[' XALcache = XNONO -o XALcache = XALmysql ']'
++ '[' XALcache = XALxen ']'
++ '[' XALcache = XALoracle ']'
++ '[' XALcache = XALdefault -o XALcache = XALcache -o XALcache = XALqdyunti ']'
++ create_default_fstab
++ echo rh62-x86-64
++ grep rh6
rh62-x86-64
++ cat
++ '[' XALcache = XALdb -o XALcache = XALdbtest ']'
++ '[' XALcache = XALhmxen ']'
++ '[' XALcache = XALmd ']'
++ echo FSTAB_FLAG
FSTAB_FLAG
++ cat /mnt/sysimage/etc/fstab
LABEL=/                 /                       ext4    defaults        1 1
LABEL=/boot             /boot                   ext4    defaults        1 2
LABEL=/home             /home                   ext4    defaults        1 2
tmpfs                   /dev/shm                tmpfs   defaults        0 0
devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
sysfs                   /sys                    sysfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0
LABEL=SWAP              swap                    swap    defaults        0 0
++ cat /mnt/sysimage/etc/mtab
++ egrep '(\/sysimage |\/sysimage\/boot)' /etc/mtab
++ sed -r -e 's/\/mnt\/sysimage(\/)?/\//' /etc/mtab
++ cat /mnt/sysimage/etc/mtab
proc /proc proc rw 0 0
sysfs /sys sysfs rw 0 0
devpts /dev/pts devpts rw,gid=5,mode=620 0 0
/dev/sda2 / ext4 rw 0 0
/dev/sda1 /boot ext4 rw 0 0
/dev/sda5 /home ext4 rw 0 0
/proc /proc none rw,bind 0 0
/sys /sys none rw,bind 0 0
/dev /dev none rw,bind 0 0
/selinux /selinux none rw,bind 0 0
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls [5-9]*.sh`'
+ source /root/54create_yumconf.sh
+ tee -a /root/install.log
++ progress create_yumconf 55
++ :
++ echo rh62-x86-64
++ grep rh53-x86-64
++ :
++ echo YUMCONF_FLAG
YUMCONF_FLAG
++ cp -f /root/hosts /mnt/sysimage/etc/hosts
++ cat /mnt/sysimage/etc/hosts
# Do not remove the following line, or various programs
# that require network functionality will fail.
127.0.0.1		localhost.localdomain localhost
110.75.20.129   yum.tbsite.net
61.183.52.211 cache11.cn109 cache11
  
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls [5-9]*.sh`'
+ source /root/70pre_chroot.sh
+ tee -a /root/install.log
++ rm -f /mnt/sysimage/var/cfengine/ppkeys/localhost.pub
++ rm -f /mnt/sysimage/var/cfengine/ppkeys/localhost.priv
++ rm -f /mnt/sysimage/root/post/
++ '[' XERROR == X ']'
++ mkdir -p /mnt/sysimage/root/post/
++ touch /mnt/sysimage/root/post/filesystemtest
++ '[' 0 '!=' 0 ']'
++ rm -f /mnt/sysimage/root/post/filesystemtest
++ cp -f /root/214202338 /mnt/sysimage/root/214202338
++ cp -f /root/214202338 /mnt/sysimage/root/cloneinfo
++ tar -zxvf /root/post.tgz -C /mnt/sysimage/root/post/
./
./17HTconfig.sh
./19sm843_fwupdate.sh
./03get_kernel.sh
./16oob_os_init.sh
./01grub_install.sh
./15modify_secure.sh
./99clean.sh
./13modify_postgres.sh
./08modify_rclocal.sh
./07modify_ip.sh
./18udev_net_rules.sh
./ngis_post.sh
./05create_initrd.sh
./04bug_mod_and_modprobe_conf.sh
./09modify_chkconfig.sh
++ cp -f /root/post.tgz /mnt/sysimage/root/
++ chmod 755 /mnt/sysimage/root/post/
++ rm -f /mnt/sysimage/etc/resolv.conf
++ cp -f /root/resolv.conf /mnt/sysimage/etc/resolv.conf
++ echo RESOLVE_FLAG
RESOLVE_FLAG
++ cat /mnt/sysimage/etc/resolv.conf
search tbsite.net
nameserver 8.8.8.8
nameserver 110.75.1.30
nameserver 114.114.114.114
options attempts:1 timeout:1
++ '[' -e /tmp/agent_install.sh ']'
++ wget -T2 -t2 -O /tmp/agent_install.sh http://agent-update.b2b.alibaba-inc.com/agent/agent_install.sh
--2014-07-17 14:32:23--  http://agent-update.b2b.alibaba-inc.com/agent/agent_install.sh
Resolving agent-update.b2b.alibaba-inc.com... 172.16.200.1
Connecting to agent-update.b2b.alibaba-inc.com|172.16.200.1|:80... failed: Network is unreachable.
++ wget -T2 -t2 -O /tmp/agent_install.sh http://gw.dragoon.alibaba-inc.com/agent/agent_install.sh
--2014-07-17 14:32:23--  http://gw.dragoon.alibaba-inc.com/agent/agent_install.sh
Resolving gw.dragoon.alibaba-inc.com... failed: Temporary failure in name resolution.
wget: unable to resolve host address `gw.dragoon.alibaba-inc.com'
++ cp -f /tmp/agent_install.sh /mnt/sysimage/tmp/
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls [5-9]*.sh`'
+ tee -a /root/install.log
+ source /root/71chroot_post.sh
++ progress start_chroot_post 70
++ :
++ rm -f /tmp/install_E_flag
++ rm -f /mnt/sysimage/tmp/install_E_flag
++ chroot /mnt/sysimage sh -x /root/post/ngis_post.sh
++ tee -a /root/post.log
+ E_file=/tmp/install_E_flag
+ W_file=/root/install_warn.log
+ ALAPP=
+ ALARMORYSN=
+ ALBIGAPP=
+ ALBIOS=
+ ALDHCPIP=
+ ALDOMAIN=
+ KS=
+ ALHN=
+ ALIP=
+ ALMAC=
+ ALOS=
+ ALOWN1=
+ ALOWN0=
+ ALPART=
+ ALRAID=
+ ALSERVICETAG=
+ ALSITE=
+ ALTMPLT=
+ ALCPM=
+ '[' '' == '' ']'
++ /usr/sbin/dmidecode -s system-serial-number
++ grep -v '^#'
++ sed 's/ //g'
+ ALSERVICETAG=214202338
+ '[' -e /root/214202338 ']'
+ source /root/214202338
++ ALBIGAPP=cache_server
++ ALDISK=/dev/sda
++ ALDOMAIN=cn109
++ ALHN=cache11
++ ALIP=61.183.52.211
++ ALOS=rh62-x86-64
++ ALPART=ALcache
++ ALROOM=cn109
++ ALSERVICETAG=214202338
++ ALSITE=cn109
++ DHCPETH=eth2
++ GATEWAY=61.183.52.247
++ IPPOOL=61.183.52.128/25
++ IVIP1=61.183.52.240
++ IVIP2=61.183.52.250
++ KS=10.120.109.155
++ NETMASK=255.255.255.128
++ NETMOD=NOBOND
++ OOB=10.120.109.211
++ WVIP1=61.183.52.241
++ WVIP2=61.183.52.251
++ WVIP3=61.183.52.242
++ WVIP4=61.183.52.252
++ WVIP5=61.183.52.243
++ WVIP6=61.183.52.253
++ DISK_SIZE=480
++ ETH0=eth2
++ ETH0_MAC=6C:92:BF:04:06:24
++ ETH1=eth3
++ ETH1_MAC=6C:92:BF:04:06:25
++ RECOVER=NO
++ MACBOND=YES
++ FSBR=ERROR
++ CONSOLE=ERROR
++ IPMILANCHANNEL=ERROR
+ '[' 214202338 == '' ']'
++ /sbin/ifconfig
++ grep 'inet addr'
++ grep -v 127.0.0.1
++ grep -v 255.255.255.255
++ awk '{print $2}'
++ awk -F: '{print $2}'
++ sed -n 1p
+ ALDHCPIP=10.120.109.200
+ '[' 61.183.52.211 == '' ']'
+ ALHOSTNAME=cache11
+ '[' cache11 == '' ']'
+ '[' XALcache = XALpg ']'
+ KERNEL=
+ KERNELi=
+ KERNELc=
+ KERNELxen=
+ SMTP=
+ VLAN=
+ '[' Xeth2 = X ']'
+ '[' X255.255.255.128 == X ']'
+ VLAN=vlan
+ '[' X61.183.52.247 == X ']'
+ mkdir -p /var/clone/
++ ls /root/post/01grub_install.sh /root/post/03get_kernel.sh /root/post/04bug_mod_and_modprobe_conf.sh /root/post/05create_initrd.sh /root/post/07modify_ip.sh /root/post/08modify_rclocal.sh /root/post/09modify_chkconfig.sh /root/post/13modify_postgres.sh /root/post/15modify_secure.sh /root/post/16oob_os_init.sh /root/post/17HTconfig.sh /root/post/18udev_net_rules.sh /root/post/19sm843_fwupdate.sh /root/post/99clean.sh
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/01grub_install.sh
+ progress 01grub_install.sh 80
+ :
+ source /root/post/01grub_install.sh
++ rm -f /etc/resolv.conf.predhclient
++ '[' 480 -gt 2300 ']'
++ rm -f /boot/grub/device.map
++ echo /dev/sda
++ grep /dev/sd
++ echo '(hd0)   /dev/sda'
++ '[' ALcache = ALmd ']'
++ grub-install --root-directory=/ /dev/sda --no-floppy
Installation finished. No error reported.
This is the contents of the device map //boot/grub/device.map.
Check if this is correct or not. If any of the lines is incorrect,
fix it and re-run the script `grub-install'.

(hd0)   /dev/sda
++ echo /dev/sda
++ grep -i -q cciss
++ '[' 1 '!=' 0 ']'
++ echo /dev/sda
++ grep -i -q cciss
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0
	initrd /initramfs-2.6.32-220.el6.x86_64.img
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/03get_kernel.sh
+ progress 03get_kernel.sh 80
+ :
+ source /root/post/03get_kernel.sh
++ rpm_install_ali_kernel
++ echo rh62-x86-64
++ grep 'rh5[0-9]'
++ echo rh62-x86-64
++ grep 'alirh6[0-9]'
++ echo rh62-x86-64
++ grep 'rh6[0-9]'
rh62-x86-64
++ KERVEL_VER=2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ mkdir /tmp/kernel
++ wget -T5 -t5 -nv -P /tmp/kernel/ http://10.120.109.155:8888/ngis/software/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
2014-07-18 02:32:30 URL:http://10.120.109.155:8888/ngis/software/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm [20085864/20085864] -> "/tmp/kernel/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm" [1]
++ wget -T5 -t5 -nv -P /tmp/kernel/ http://10.120.109.155:8888/ngis/software/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
2014-07-18 02:32:30 URL:http://10.120.109.155:8888/ngis/software/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm [6557672/6557672] -> "/tmp/kernel/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm" [1]
++ wget -T5 -t5 -nv -P /tmp/kernel/ http://10.120.109.155:8888/ngis/software/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
2014-07-18 02:32:31 URL:http://10.120.109.155:8888/ngis/software/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm [7531860/7531860] -> "/tmp/kernel/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm" [1]
++ rpm -ivh /tmp/kernel/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
Preparing...                ##################################################
tcp-kernel-firmware         ##################################################
++ rpm -ivh /tmp/kernel/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
Preparing...                ##################################################
tcp-kernel                  ##################################################
++ rpm -ivh /tmp/kernel/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
Preparing...                ##################################################
tcp-kernel-devel            ##################################################
++ grep 2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 /boot/grub/grub.conf
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0 crashkernel=auto
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
++ get_base_kernel_ver
++ case $ALOS in
++ BASE_KERNEL=2.6.32-220.el6.x86_64
++ case $ALBIGAPP in
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0 crashkernel=auto
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0
	initrd /initramfs-2.6.32-220.el6.x86_64.img
++ KERNELi=2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ echo GET_KERNEL_FLAG
GET_KERNEL_FLAG
++ rpm -qa
++ grep kernel
tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
libreport-plugin-kerneloops-2.0.5-20.el6.x86_64
kernel-headers-2.6.32-220.el6.x86_64
kernel-devel-2.6.32-220.el6.x86_64
abrt-addon-kerneloops-2.0.4-14.el6.x86_64
tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
kernel-2.6.32-220.el6.x86_64
kernel-firmware-2.6.32-220.el6.noarch
dracut-kernel-004-256.el6.noarch
tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ echo 2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ /sbin/grubby --update-kernel ALL --grub --remove-args=rhgb
++ /sbin/grubby --update-kernel ALL --grub --remove-args=quiet
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/04bug_mod_and_modprobe_conf.sh
+ progress 04bug_mod_and_modprobe_conf.sh 80
+ :
+ source /root/post/04bug_mod_and_modprobe_conf.sh
++ bug_cve_2009_2692
++ FL=/etc/modprobe.conf
+++ echo rh62-x86-64
+++ cut -c3
++ OSr=6
++ '[' X6 = X3 ']'
++ '[' X6 = X4 ']'
++ '[' X6 = X5 ']'
++ bug_disable_ipv6
++ '[' Xcn109 = XALinc -o Xcn109 = XALqd -o Xcn109 = Xkfc ']'
++ bug_netxtreme2
+++ echo rh62-x86-64
+++ cut -c3
++ OSr=6
++ '[' X6 = X5 ']'
++ update_modules
++ for i in '/lib/modules/*'
+++ basename /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ i=2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ '[' -e /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/extra/mpt2sas.ko ']'
++ wget -O /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/extra/mpt2sas.ko http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 404 Not Found
2014-07-18 02:33:00 ERROR 404: Not Found.

++ '[' 8 == 0 ']'
++ rm -f /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/extra/mpt2sas.ko
++ '[' -e /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/updates/igb.ko ']'
++ wget -O /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/updates/igb.ko http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 404 Not Found
2014-07-18 02:33:00 ERROR 404: Not Found.

++ '[' 8 == 0 ']'
++ rm -f /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/updates/igb.ko
++ for i in '/lib/modules/*'
+++ basename /lib/modules/2.6.32-220.el6.x86_64
++ i=2.6.32-220.el6.x86_64
++ '[' -e /lib/modules/2.6.32-220.el6.x86_64/extra/mpt2sas.ko ']'
++ wget -O /lib/modules/2.6.32-220.el6.x86_64/extra/mpt2sas.ko http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 404 Not Found
2014-07-18 02:33:00 ERROR 404: Not Found.

++ '[' 8 == 0 ']'
++ rm -f /lib/modules/2.6.32-220.el6.x86_64/extra/mpt2sas.ko
++ '[' -e /lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko ']'
++ wget -O /lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 200 OK
Length: 5274645 (5.0M) [application/x-troff-man]
Saving to: `/lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko'

     0K .......... .......... .......... .......... ..........  0% 8.78M 1s
    50K .......... .......... .......... .......... ..........  1% 10.0M 1s
   100K .......... .......... .......... .......... ..........  2% 10.2M 1s
   150K .......... .......... .......... .......... ..........  3% 11.9M 0s
   200K .......... .......... .......... .......... ..........  4% 11.7M 0s
   250K .......... .......... .......... .......... ..........  5% 10.8M 0s
   300K .......... .......... .......... .......... ..........  6% 12.4M 0s
   350K .......... .......... .......... .......... ..........  7% 10.1M 0s
   400K .......... .......... .......... .......... ..........  8% 14.8M 0s
   450K .......... .......... .......... .......... ..........  9% 16.3M 0s
   500K .......... .......... .......... .......... .......... 10% 12.7M 0s
   550K .......... .......... .......... .......... .......... 11% 15.4M 0s
   600K .......... .......... .......... .......... .......... 12% 12.9M 0s
   650K .......... .......... .......... .......... .......... 13% 13.1M 0s
   700K .......... .......... .......... .......... .......... 14% 18.5M 0s
   750K .......... .......... .......... .......... .......... 15% 13.0M 0s
   800K .......... .......... .......... .......... .......... 16% 17.9M 0s
   850K .......... .......... .......... .......... .......... 17% 13.0M 0s
   900K .......... .......... .......... .......... .......... 18% 21.7M 0s
   950K .......... .......... .......... .......... .......... 19% 23.8M 0s
  1000K .......... .......... .......... .......... .......... 20% 18.8M 0s
  1050K .......... .......... .......... .......... .......... 21% 27.0M 0s
  1100K .......... .......... .......... .......... .......... 22% 27.9M 0s
  1150K .......... .......... .......... .......... .......... 23% 18.5M 0s
  1200K .......... .......... .......... .......... .......... 24% 25.0M 0s
  1250K .......... .......... .......... .......... .......... 25% 19.8M 0s
  1300K .......... .......... .......... .......... .......... 26% 24.6M 0s
  1350K .......... .......... .......... .......... .......... 27% 26.4M 0s
  1400K .......... .......... .......... .......... .......... 28% 19.2M 0s
  1450K .......... .......... .......... .......... .......... 29% 22.1M 0s
  1500K .......... .......... .......... .......... .......... 30% 20.3M 0s
  1550K .......... .......... .......... .......... .......... 31% 25.6M 0s
  1600K .......... .......... .......... .......... .......... 32% 23.7M 0s
  1650K .......... .......... .......... .......... .......... 33% 18.9M 0s
  1700K .......... .......... .......... .......... .......... 33% 25.0M 0s
  1750K .......... .......... .......... .......... .......... 34% 21.2M 0s
  1800K .......... .......... .......... .......... .......... 35% 26.6M 0s
  1850K .......... .......... .......... .......... .......... 36% 25.0M 0s
  1900K .......... .......... .......... .......... .......... 37% 20.1M 0s
  1950K .......... .......... .......... .......... .......... 38% 22.9M 0s
  2000K .......... .......... .......... .......... .......... 39% 19.8M 0s
  2050K .......... .......... .......... .......... .......... 40% 22.8M 0s
  2100K .......... .......... .......... .......... .......... 41% 28.2M 0s
  2150K .......... .......... .......... .......... .......... 42% 20.1M 0s
  2200K .......... .......... .......... .......... .......... 43% 26.8M 0s
  2250K .......... .......... .......... .......... .......... 44% 27.5M 0s
  2300K .......... .......... .......... .......... .......... 45% 22.9M 0s
  2350K .......... .......... .......... .......... .......... 46% 24.8M 0s
  2400K .......... .......... .......... .......... .......... 47% 20.7M 0s
  2450K .......... .......... .......... .......... .......... 48% 25.2M 0s
  2500K .......... .......... .......... .......... .......... 49% 29.0M 0s
  2550K .......... .......... .......... .......... .......... 50% 18.5M 0s
  2600K .......... .......... .......... .......... .......... 51% 25.6M 0s
  2650K .......... .......... .......... .......... .......... 52% 20.0M 0s
  2700K .......... .......... .......... .......... .......... 53% 26.1M 0s
  2750K .......... .......... .......... .......... .......... 54% 23.2M 0s
  2800K .......... .......... .......... .......... .......... 55% 19.2M 0s
  2850K .......... .......... .......... .......... .......... 56% 23.4M 0s
  2900K .......... .......... .......... .......... .......... 57% 19.1M 0s
  2950K .......... .......... .......... .......... .......... 58% 24.0M 0s
  3000K .......... .......... .......... .......... .......... 59% 26.7M 0s
  3050K .......... .......... .......... .......... .......... 60% 19.5M 0s
  3100K .......... .......... .......... .......... .......... 61% 24.2M 0s
  3150K .......... .......... .......... .......... .......... 62% 18.8M 0s
  3200K .......... .......... .......... .......... .......... 63% 26.2M 0s
  3250K .......... .......... .......... .......... .......... 64% 25.5M 0s
  3300K .......... .......... .......... .......... .......... 65% 19.9M 0s
  3350K .......... .......... .......... .......... .......... 66% 21.8M 0s
  3400K .......... .......... .......... .......... .......... 66% 24.1M 0s
  3450K .......... .......... .......... .......... .......... 67% 21.8M 0s
  3500K .......... .......... .......... .......... .......... 68% 23.8M 0s
  3550K .......... .......... .......... .......... .......... 69% 19.6M 0s
  3600K .......... .......... .......... .......... .......... 70% 26.0M 0s
  3650K .......... .......... .......... .......... .......... 71% 26.3M 0s
  3700K .......... .......... .......... .......... .......... 72% 19.4M 0s
  3750K .......... .......... .......... .......... .......... 73% 26.0M 0s
  3800K .......... .......... .......... .......... .......... 74% 17.7M 0s
  3850K .......... .......... .......... .......... .......... 75% 25.5M 0s
  3900K .......... .......... .......... .......... .......... 76% 27.6M 0s
  3950K .......... .......... .......... .......... .......... 77% 18.2M 0s
  4000K .......... .......... .......... .......... .......... 78% 27.1M 0s
  4050K .......... .......... .......... .......... .......... 79% 22.3M 0s
  4100K .......... .......... .......... .......... .......... 80% 25.6M 0s
  4150K .......... .......... .......... .......... .......... 81% 24.6M 0s
  4200K .......... .......... .......... .......... .......... 82% 19.9M 0s
  4250K .......... .......... .......... .......... .......... 83% 24.6M 0s
  4300K .......... .......... .......... .......... .......... 84% 23.0M 0s
  4350K .......... .......... .......... .......... .......... 85% 22.5M 0s
  4400K .......... .......... .......... .......... .......... 86% 26.0M 0s
  4450K .......... .......... .......... .......... .......... 87% 18.7M 0s
  4500K .......... .......... .......... .......... .......... 88% 25.8M 0s
  4550K .......... .......... .......... .......... .......... 89% 34.7M 0s
  4600K .......... .......... .......... .......... .......... 90% 26.8M 0s
  4650K .......... .......... .......... .......... .......... 91% 38.3M 0s
  4700K .......... .......... .......... .......... .......... 92% 27.8M 0s
  4750K .......... .......... .......... .......... .......... 93% 36.2M 0s
  4800K .......... .......... .......... .......... .......... 94% 35.2M 0s
  4850K .......... .......... .......... .......... .......... 95% 27.3M 0s
  4900K .......... .......... .......... .......... .......... 96% 37.9M 0s
  4950K .......... .......... .......... .......... .......... 97% 31.9M 0s
  5000K .......... .......... .......... .......... .......... 98% 36.2M 0s
  5050K .......... .......... .......... .......... .......... 99% 34.0M 0s
  5100K .......... .......... .......... .......... .......... 99% 33.6M 0s
  5150K .                                                     100% 1.99M=0.2s

2014-07-18 02:33:00 (20.5 MB/s) - `/lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko' saved [5274645/5274645]

++ '[' 0 == 0 ']'
++ depmod -a 2.6.32-220.el6.x86_64
++ echo BUGMOD_FLAG
BUGMOD_FLAG
++ cat /etc/modprobe.conf
cat: /etc/modprobe.conf: No such file or directory
++ ls -l /etc/modprobe.d/
total 32
-rw-r--r-- 1 root root   52 Sep 17  2012 anaconda.conf
-rw-r--r-- 1 root root  884 Nov  9  2011 blacklist.conf
-rw-r--r-- 1 root root  382 Aug 11  2010 dist-alsa.conf
-rw-r--r-- 1 root root  473 Aug 11  2010 dist-oss.conf
-rw-r--r-- 1 root root 5596 Aug 11  2010 dist.conf
-rw-r--r-- 1 root root   30 Oct 10  2009 openfwwf.conf
-rw-r--r-- 1 root root  326 Sep 17  2012 security.conf
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/05create_initrd.sh
+ progress 05create_initrd.sh 80
+ :
+ source /root/post/05create_initrd.sh
+++ lspci -n
+++ awk '{if($2~"0104|0100|0107|0106"){print $1}}'
+++ sed '/^$/d'
++ DISKTYPE='00:1f.2
04:00.0
06:00.0'
++ deps2=sd_mod
++ for j in '$DISKTYPE'
+++ lspci -n
+++ grep 00:1f.2
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $5}'
++ vendor_id=8086
+++ grep 00:1f.2
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $6}'
+++ lspci -n
++ device_id=1d02
+++ grep '0x00008086 0x00001d02' /lib/modules/2.6.32-220.el6.x86_64/modules.pcimap
+++ awk '{print $1}'
+++ sort
+++ uniq
++ driver=ahci
++ findmodule ahci
++ modName=ahci
++ deps=
++ '[' -z ahci ']'
++ moduledep ahci
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends ahci
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' ahci '!=' ahci ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ deps2='sd_mod ahci'
++ for j in '$DISKTYPE'
+++ lspci -n
+++ grep 04:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $5}'
++ vendor_id=1000
+++ lspci -n
+++ grep 04:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $6}'
++ device_id=0087
+++ grep '0x00001000 0x00000087' /lib/modules/2.6.32-220.el6.x86_64/modules.pcimap
+++ awk '{print $1}'
+++ sort
+++ uniq
++ driver=mpt2sas
++ findmodule mpt2sas
++ modName=mpt2sas
++ deps=
++ '[' -z mpt2sas ']'
++ moduledep mpt2sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends mpt2sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' raid_class '!=' mpt2sas ']'
+++ echo -n 'raid_class '
+++ read foo
+++ '[' scsi_transport_sas '!=' mpt2sas ']'
+++ echo -n 'scsi_transport_sas '
+++ read foo
+++ '[' mpt2sas '!=' mpt2sas ']'
+++ read foo
++ deps='raid_class scsi_transport_sas '
++ '[' -n 'raid_class scsi_transport_sas ' ']'
++ echo ': raid_class scsi_transport_sas '
: raid_class scsi_transport_sas 
++ for j in '$deps'
++ echo sd_mod ahci
++ grep -q raid_class
++ deps2='raid_class sd_mod ahci'
++ for j in '$deps'
++ echo raid_class sd_mod ahci
++ grep -q scsi_transport_sas
++ deps2='scsi_transport_sas raid_class sd_mod ahci'
++ for i in '$deps'
++ findmodule raid_class
++ modName=raid_class
++ deps=
++ '[' -z raid_class ']'
++ moduledep raid_class
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends raid_class
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' raid_class '!=' raid_class ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ for i in '$deps'
++ findmodule scsi_transport_sas
++ modName=scsi_transport_sas
++ deps=
++ '[' -z scsi_transport_sas ']'
++ moduledep scsi_transport_sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends scsi_transport_sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' scsi_transport_sas ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ deps2='scsi_transport_sas raid_class sd_mod ahci mpt2sas'
++ for j in '$DISKTYPE'
+++ lspci -n
+++ grep 06:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $5}'
++ vendor_id=8086
+++ lspci -n
+++ grep 06:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $6}'
++ device_id=1d6b
+++ grep '0x00008086 0x00001d6b' /lib/modules/2.6.32-220.el6.x86_64/modules.pcimap
+++ awk '{print $1}'
+++ sort
+++ uniq
++ driver=isci
++ findmodule isci
++ modName=isci
++ deps=
++ '[' -z isci ']'
++ moduledep isci
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends isci
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' isci ']'
+++ echo -n 'scsi_transport_sas '
+++ read foo
+++ '[' libsas '!=' isci ']'
+++ echo -n 'libsas '
+++ read foo
+++ '[' isci '!=' isci ']'
+++ read foo
++ deps='scsi_transport_sas libsas '
++ '[' -n 'scsi_transport_sas libsas ' ']'
++ echo ': scsi_transport_sas libsas '
: scsi_transport_sas libsas 
++ for j in '$deps'
++ echo scsi_transport_sas raid_class sd_mod ahci mpt2sas
++ grep -q scsi_transport_sas
++ for j in '$deps'
++ echo scsi_transport_sas raid_class sd_mod ahci mpt2sas
++ grep -q libsas
++ deps2='libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas'
++ for i in '$deps'
++ findmodule scsi_transport_sas
++ modName=scsi_transport_sas
++ deps=
++ '[' -z scsi_transport_sas ']'
++ moduledep scsi_transport_sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends scsi_transport_sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' scsi_transport_sas ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ for i in '$deps'
++ findmodule libsas
++ modName=libsas
++ deps=
++ '[' -z libsas ']'
++ moduledep libsas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends libsas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' libsas ']'
+++ echo -n 'scsi_transport_sas '
+++ read foo
+++ '[' libsas '!=' libsas ']'
+++ read foo
++ deps='scsi_transport_sas '
++ '[' -n 'scsi_transport_sas ' ']'
++ echo ': scsi_transport_sas '
: scsi_transport_sas 
++ for j in '$deps'
++ echo libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas
++ grep -q scsi_transport_sas
++ for i in '$deps'
++ findmodule scsi_transport_sas
++ modName=scsi_transport_sas
++ deps=
++ '[' -z scsi_transport_sas ']'
++ moduledep scsi_transport_sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends scsi_transport_sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' scsi_transport_sas ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ deps2='libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas isci'
+++ echo 'libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas isci'
+++ awk '{for(i=1;i<=NF;i++)if(++a[$i]==1){printf $i" "}}'
++ deps2='libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas isci '
++ for i in '$deps2'
++ preload=' --preload libsas'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci'
++ echo 'preload:  --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci'
preload:  --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci
++ rm -f /boot/initrd-2.6.32-220.el6.x86_64.img
++ echo rh62-x86-64
++ egrep -q '(6U2|rh6)'
++ rm -f /boot/initramfs-2.6.32-220.el6.x86_64.img
++ mkinitrd --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci /boot/initramfs-2.6.32-220.el6.x86_64.img 2.6.32-220.el6.x86_64
++ '[' -e /boot/initramfs-2.6.32-220.el6.x86_64.img ']'
++ return
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/07modify_ip.sh
+ progress 07modify_ip.sh 80
+ :
+ source /root/post/07modify_ip.sh
++ rm -rf /etc/sysconfig/network-scripts/ifcfg-eth0 /etc/sysconfig/network-scripts/ifcfg-eth1 /etc/sysconfig/network-scripts/ifcfg-eth2 /etc/sysconfig/network-scripts/ifcfg-eth3 /etc/sysconfig/network-scripts/ifcfg-eth4 /etc/sysconfig/network-scripts/ifcfg-eth5 /etc/sysconfig/network-scripts/ifcfg-eth7 /etc/sysconfig/network-scripts/ifcfg-eth8 /etc/sysconfig/network-scripts/ifcfg-eth9
++ echo rh62-x86-64
++ grep rh53-x86-64
++ '[' cn109 '!=' ALinc ']'
++ check_ip
++ v_ip=61.183.52.211
++ illegal_ip 61.183.52.211
+++ echo 61.183.52.211
+++ sed -ne '/^[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}$/p'
++ v_str3=61.183.52.211
++ '[' '!' 61.183.52.211 ']'
++ '[' 0 -eq 66 ']'
++ echo rh62-x86-64
++ grep rh53-x86-64
++ :
++ conflict_exist 61.183.52.211
++ ping -c 2 -W5 61.183.52.211
connect: Network is unreachable
++ '[' 2 == 0 ']'
++ '[' 0 -eq 66 ']'
++ ERROR=0
++ '[' X0 = X0 ']'
++ VIP=61.183.52.211
++ VHOSTNAME=cache11.cn109
++ '[' XNOBOND = XNOBOND -o XNOBOND = X ']'
++ cal_network
++ '[' cn109 == ALinc -o cn109 == ALqd -o Xcn109 = Xkfc ']'
++ return
++ create_ali_nobond
++ cat
++ '[' cache_server = cache_server -o cache_server = '*cache_server' ']'
++ VIP0=61.183.52.240
++ VIP1=61.183.52.250
++ create_lo 1
+++ eval echo '{0..1}'
++++ echo 0 1
++ for i in '$(eval echo {0..$1})'
++ eval 'ip=$VIP0'
+++ ip=61.183.52.240
++ cat
++ cat /etc/sysconfig/network-scripts/ifcfg-lo:0
DEVICE=lo:0
IPADDR=61.183.52.240
NETMASK=255.255.255.255
NETWORK=61.183.52.240
BROADCAST=61.183.52.240
ONBOOT=yes
NAME=loopback
++ for i in '$(eval echo {0..$1})'
++ eval 'ip=$VIP1'
+++ ip=61.183.52.250
++ cat
++ cat /etc/sysconfig/network-scripts/ifcfg-lo:1
DEVICE=lo:1
IPADDR=61.183.52.250
NETMASK=255.255.255.255
NETWORK=61.183.52.250
BROADCAST=61.183.52.250
ONBOOT=yes
NAME=loopback
++ cat
++ echo MODIFY_IP_FLAG
MODIFY_IP_FLAG
++ cat /etc/sysconfig/network
NETWORKING="yes"
HOSTNAME="cache11.cn109"
GATEWAY="61.183.52.247"
++ cat /etc/sysconfig/network-scripts/ifcfg-eth2
DEVICE=eth2
#HWADDR=6C:92:BF:04:06:24
BOOTPROTO="static"
TYPE="Ethernet"
IPADDR=61.183.52.211
NETMASK=255.255.255.128
ONBOOT=yes
RX_MAX=`ethtool -g "$DEVICE" | grep 'Pre-set' -A1 | awk '/RX/{print $2}'`
RX_CURRENT=`ethtool -g "$DEVICE" | grep "Current" -A1 | awk '/RX/{print $2}'`
[ "$RX_CURRENT" -lt "$RX_MAX" ] && ethtool -G "$DEVICE" rx "$RX_MAX"
++ cat /etc/sysconfig/network-scripts/ifcfg-bond0
cat: /etc/sysconfig/network-scripts/ifcfg-bond0: No such file or directory
++ cat /etc/resolv.conf
search tbsite.net
nameserver 8.8.8.8
nameserver 110.75.1.30
nameserver 114.114.114.114
options attempts:1 timeout:1
++ cat /etc/hosts
# Do not remove the following line, or various programs
# that require network functionality will fail.
127.0.0.1		localhost.localdomain localhost
110.75.20.129   yum.tbsite.net
61.183.52.211 cache11.cn109 cache11
  
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/08modify_rclocal.sh
+ progress 08modify_rclocal.sh 80
+ :
+ source /root/post/08modify_rclocal.sh
++ cp -p /etc/rc.local /etc/rc.local.bak
++ cat
++ wget -T3 -P /tmp/ http://10.120.109.155:8888/ngis/script/cdn_profile.sh
--2014-07-18 02:33:26--  http://10.120.109.155:8888/ngis/script/cdn_profile.sh
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2767 (2.7K) [application/x-sh]
Saving to: `/tmp/cdn_profile.sh'

     0K ..                                                    100% 48.2K=0.06s

2014-07-18 02:33:26 (48.2 KB/s) - `/tmp/cdn_profile.sh' saved [2767/2767]

+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/09modify_chkconfig.sh
+ progress 09modify_chkconfig.sh 80
+ :
+ source /root/post/09modify_chkconfig.sh
++ modify_chkconfig
++ echo '::Modify chkconfig for the new system...'
::Modify chkconfig for the new system...
+++ chkconfig --list
+++ grep 0:
+++ awk '{print $1}'
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 DragoonAgent on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 abrt-ccpp off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 abrt-oops off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 abrtd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 acpid off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 atd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 avahi-daemon off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 cgconfig off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 cgred off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 cpuspeed off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 crond on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 haldaemon off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 ip6tables off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 ipmi on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 ipmievd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 iptables off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 irqbalance off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 kdump off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 libvirt-guests off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 lvm2-monitor off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 mdmonitor off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 messagebus off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 netconsole off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 netfs off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 network on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 nfs off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 nfslock off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 ntpd on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 ntpdate off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 postfix off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 psacct off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 quota_nld off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rdisc off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 restorecond off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcbind off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcgssd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcidmapd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcsvcgssd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 rsyslog on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 saslauthd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 smartd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 sshd on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 sysstat off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 udev-post off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 wpa_supplicant off
++ echo '::End modify chkconfig'
::End modify chkconfig
++ mkdir /mnt/nfs
++ mount -o nolock 10.120.109.155:/home/ngis/nfs /mnt/nfs
++ SDIR=/mnt/nfs
++ wget -T3 -t2 -O /etc/ntp.conf http://10.120.109.155:8888/ngis/download/ntp.conf
++ wget -T3 -t2 -O /etc/sysctl.conf http://10.120.109.155:8888/ngis/download/sysctl.conf
++ wget -T3 -t2 -O /etc/sudoers http://10.120.109.155:8888/ngis/download/sudoers
++ wget -T3 -t2 -O /etc/modprobe.d/disable_ipv6.conf http://10.120.109.155:8888/ngis/download/disable_ipv6.conf
++ wget -nv -P /opt/ http://10.120.109.155:8888/ngis/download/taobao-repo-utils-1.1.0-23.noarch.rpm
++ echo CHKCONFIG_FLAG
CHKCONFIG_FLAG
++ rpm -ihv http://10.120.109.155:8888/ngis/download/staragent-1.1.2-el6.x86_64.rpm
Retrieving http://10.120.109.155:8888/ngis/download/staragent-1.1.2-el6.x86_64.rpm
Preparing...                ##################################################
	file /usr/alisys/dragoon/bin/AgentDownLoad from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/bin/AgentUpdate from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/bin/DragoonAgent from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/bin/agent.sh from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/libexec/version.sh from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
++ rpm -ihv http://10.120.109.155:8888/ngis/download/hwconfig-1.16.8-2.noarch.rpm
Retrieving http://10.120.109.155:8888/ngis/download/hwconfig-1.16.8-2.noarch.rpm
Preparing...                ##################################################
hwconfig                    ##################################################
++ echo 'root    soft    nofile  65535
root    hard    nofile  65535
admin   soft    nofile  65535
admin   hard    nofile  65535'
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/13modify_postgres.sh
+ progress 13modify_postgres.sh 80
+ :
+ source /root/post/13modify_postgres.sh
++ HOST=cache11
++ ethtool -i eth0
++ grep ixg
++ ETHOOB=eth1
+++ echo 10.120.109.211
+++ awk -F. '{print $1"."$2"."$3".251"}'
++ RIP1=10.120.109.251
+++ echo 10.120.109.211
+++ awk -F. '{print $1"."$2"."$3".252"}'
++ RIP2=10.120.109.252
++ init_app
++ mkdir /root/.ssh
mkdir: cannot create directory `/root/.ssh': File exists
++ cat /mnt/nfs/system/root.id_rsa.pub
++ useradd -g 500 -u 500 admin
useradd: group '500' does not exist
++ useradd admin
++ mkdir -p /home/admin/.ssh/
++ cat /mnt/nfs/system/admin.id_rsa.pub
++ chown admin.admin /home/admin/.ssh/authorized_keys
++ grouplist='
	users:100
	logs:1338
	ads:1685
	audit:2914
	tbops:19001
	tbpe:19011
	tbdba:19021
	tbdevdba:19022
	tbnoc:19031
	tbdev:19051
	tbscm:19041
	tbtest:19061
	'
++ for i in '$grouplist'
+++ echo users:100
+++ cut -d : -f2
++ gid=100
+++ echo users:100
+++ cut -d : -f1
++ group=users
++ groupadd -g 100 users
groupadd: group 'users' already exists
++ for i in '$grouplist'
+++ echo logs:1338
+++ cut -d : -f2
++ gid=1338
+++ echo logs:1338
+++ cut -d : -f1
++ group=logs
++ groupadd -g 1338 logs
++ for i in '$grouplist'
+++ echo ads:1685
+++ cut -d : -f2
++ gid=1685
+++ echo ads:1685
+++ cut -d : -f1
++ group=ads
++ groupadd -g 1685 ads
++ for i in '$grouplist'
+++ echo audit:2914
+++ cut -d : -f2
++ gid=2914
+++ echo audit:2914
+++ cut -d : -f1
++ group=audit
++ groupadd -g 2914 audit
++ for i in '$grouplist'
+++ echo tbops:19001
+++ cut -d : -f2
++ gid=19001
+++ echo tbops:19001
+++ cut -d : -f1
++ group=tbops
++ groupadd -g 19001 tbops
++ for i in '$grouplist'
+++ echo tbpe:19011
+++ cut -d : -f2
++ gid=19011
+++ echo tbpe:19011
+++ cut -d : -f1
++ group=tbpe
++ groupadd -g 19011 tbpe
++ for i in '$grouplist'
+++ echo tbdba:19021
+++ cut -d : -f2
++ gid=19021
+++ echo tbdba:19021
+++ cut -d : -f1
++ group=tbdba
++ groupadd -g 19021 tbdba
++ for i in '$grouplist'
+++ echo tbdevdba:19022
+++ cut -d : -f2
++ gid=19022
+++ echo tbdevdba:19022
+++ cut -d : -f1
++ group=tbdevdba
++ groupadd -g 19022 tbdevdba
++ for i in '$grouplist'
+++ echo tbnoc:19031
+++ cut -d : -f2
++ gid=19031
+++ echo tbnoc:19031
+++ cut -d : -f1
++ group=tbnoc
++ groupadd -g 19031 tbnoc
++ for i in '$grouplist'
+++ echo tbdev:19051
+++ cut -d : -f2
++ gid=19051
+++ echo tbdev:19051
+++ cut -d : -f1
++ group=tbdev
++ groupadd -g 19051 tbdev
++ for i in '$grouplist'
+++ echo tbscm:19041
+++ cut -d : -f2
++ gid=19041
+++ echo tbscm:19041
+++ cut -d : -f1
++ group=tbscm
++ groupadd -g 19041 tbscm
++ for i in '$grouplist'
+++ echo tbtest:19061
+++ cut -d : -f2
++ gid=19061
+++ echo tbtest:19061
+++ cut -d : -f1
++ group=tbtest
++ groupadd -g 19061 tbtest
++ [[ cache11 = console* ]]
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/15modify_secure.sh
+ progress 15modify_secure.sh 80
+ :
+ source /root/post/15modify_secure.sh
++ echo SECURE_FLAG
SECURE_FLAG
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/16oob_os_init.sh
+ progress 16oob_os_init.sh 80
+ :
+ source /root/post/16oob_os_init.sh
+++ get_PN
++++ dmidecode -s system-product-name
++++ grep -v '^#'
++++ sed 's/ *$//g'
+++ PRONAME=NF5270M3
+++ '[' XNF5270M3 == X ']'
+++ echo NF5270M3
+++ grep -qi IBM
+++ echo -n NF5270M3
+++ return 0
++ Proname=NF5270M3
+++ get_SN
+++ dmidecode -s system-serial-number
+++ grep -v '^#'
+++ sed 's/ //g'
+++ echo
+++ grep -i ToBeFilled
++ SN=214202338
+++ get_MANU
+++ dmidecode -s system-manufacturer
+++ grep -v '^#'
+++ sed 's/ //g'
++ Manu=Inspur
++ get_TTYS
++ case $Proname in
++ FSBR=115200
++ CONSOLE=ttyS0
++ IPMILANCHANNEL=1
++ echo FSBR:115200
FSBR:115200
++ echo CONSOLE:ttyS0
CONSOLE:ttyS0
++ echo IPMILANCHANNEL:1
IPMILANCHANNEL:1
++ echo LICENSE:
LICENSE:
++ check_oob_input
++ '[' 115200 = 115200 -o 115200 = 57600 -o 115200 = 38400 -o 115200 = 19200 -o 115200 = 9600 ']'
++ '[' ttyS0 = ttyS0 -o ttyS0 = ttyS1 -o ttyS0 = xvc ']'
++ echo FSBR:115200
FSBR:115200
++ echo CONSOLE:ttyS0
CONSOLE:ttyS0
++ echo 'Now, initialize OS for OOB ...'
Now, initialize OS for OOB ...
++ echo rh62-x86-64
++ grep -q -i -E '(rh|AliOS)[56]'
++ '[' ALcache == '' ']'
++ init_os_grub
++ GRUBCFG=/boot/grub/grub.conf
++ '[' '!' -f /boot/grub/grub.conf ']'
++ sed -i 's/^\([ \t]*\)kernel\([ \t]\{1,\}\)\/vmlinuz/\1kernel \/vmlinuz/' /boot/grub/grub.conf
++ sed -i 's/^\([ \t]*\)kernel[ \t]\{1,\}\/vmlinuz\(.*\)xen/\1kernel  \/vmlinuz\2xen/' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/[ \t]\{1,\}console=ttyS[01],[0-9]\{1,\}[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/[ \t]\{1,\}console=tty0[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/[ \t]*rhgb[ \t]*quiet//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/\([ \t]*\)$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*com[0-9]=[0-9]*,[a-zA-Z0-9]*[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*com[0-9]=[0-9]*\([ \t]\|$\)/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*console=com[0-9],[a-zA-Z0-9]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\}console=ttyS[0-9],[0-9]\{1,\}\([ \t]\|$\)/ /g' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\}console=[a-zA-Z0-9]\{1,\}[ \t]*/ /g' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\},[0-9]\{1,\}[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\}xencons=[a-zA-Z0-9]\{1,\}[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]*$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel  \/vmlinuz.*xen.*/s/[ \t]*console=[a-zA-Z0-9]*[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel  \/vmlinuz.*xen.*/s/[ \t]*$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinuz/s/$/ console=tty0 console=ttyS0,115200 /' /boot/grub/grub.conf
++ local COM_N
++ case ${CONSOLE} in
++ COM_N=com1
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/$/ com1=115200,8n1 console=com1,vga/' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]*\/vmlinuz/s/$/ console=xvc xencons=xvc/' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel  \/vmlinuz.*xen/s/$/ console=xvc0/' /boot/grub/grub.conf
++ sed -i 's/kernel  \/vmlinuz/kernel \/vmlinuz/' /boot/grub/grub.conf
++ init_os_inittab
++ echo rh62-x86-64
++ grep '^rh6'
rh62-x86-64
++ echo 'initctl start serial DEV=ttyS0 SPEED=115200'
++ echo 'rh62-x86-64 not need to modify inittab'
rh62-x86-64 not need to modify inittab
++ echo ttyS0
++ return 0
++ set_oob
++ ipmitool lan set 1 access on
++ ipmitool lan set 1 ipsrc static
++ ipmitool lan set 1 ipaddr 10.120.109.211
Setting LAN IP Address to 10.120.109.211
++ ipmitool lan set 1 netmask 255.255.255.0
Setting LAN Subnet Mask to 255.255.255.0
++ ipmitool user set name 3 taobao
Set User Name command failed (user 3, name taobao): Invalid data field in request
++ ipmitool user set password 3 9ijn0okm
Set User Password command failed (user 3): Invalid data field in request
++ ipmitool user enable 3
++ ipmitool user priv 3 4 1
++ ipmitool sol payload enable 1 3
++ ipmitool channel setaccess 1 3 callin=on ipmi=on link=on privilege=4
+++ ipmitool user list 1
+++ grep taobao
+++ awk '{if($1 !~ 3 )print $1}'
++ id=6
++ for i in '$id'
++ ipmitool user set password 6 9ijn0okm
++ sleep 2
++ echo INIT_OOB_OS_FLAG
INIT_OOB_OS_FLAG
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 crashkernel=auto console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.el6.x86_64.img
++ cat /etc/inittab
# inittab is only used by upstart for the default runlevel.
#
# ADDING OTHER CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.
#
# System initialization is started by /etc/init/rcS.conf
#
# Individual runlevels are started by /etc/init/rc.conf
#
# Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf
#
# Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,
# with configuration in /etc/sysconfig/init.
#
# For information on how to write upstart event handlers, or how
# upstart works, see init(5), init(8), and initctl(8).
#
# Default runlevel. The runlevels used are:
#   0 - halt (Do NOT set initdefault to this)
#   1 - Single user mode
#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)
#   3 - Full multiuser mode
#   4 - unused
#   5 - X11
#   6 - reboot (Do NOT set initdefault to this)
# 
id:3:initdefault:
++ cat /etc/securetty
console
vc/1
vc/2
vc/3
vc/4
vc/5
vc/6
vc/7
vc/8
vc/9
vc/10
vc/11
tty1
tty2
tty3
tty4
tty5
tty6
tty7
tty8
tty9
tty10
tty11
ttyS0
++ echo rate=115200
++ echo console=ttyS0
++ echo 115200
++ grep ERROR
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/17HTconfig.sh
+ progress 17HTconfig.sh 80
+ :
+ source /root/post/17HTconfig.sh
++ URL=http://yum.corp.taobao.com/aliyun/5Server/x86_64/server/hardware/tool/
++ ping -c2 -w4 yum.corp.taobao.com
ping: unknown host yum.corp.taobao.com
++ URL=http://10.120.109.155:8888/ngis/download
+++ get_PN
++++ dmidecode -s system-product-name
++++ grep -v '^#'
++++ sed 's/ *$//g'
+++ PRONAME=NF5270M3
+++ '[' XNF5270M3 == X ']'
+++ echo NF5270M3
+++ grep -qi IBM
+++ echo -n NF5270M3
+++ return 0
++ Proname=NF5270M3
+++ get_MANU
+++ dmidecode -s system-manufacturer
+++ grep -v '^#'
+++ sed 's/ //g'
++ Manu=Inspur
++ [[ Xcache11 = \X ]]
++ [[ cache11 =~ lvs ]]
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/18udev_net_rules.sh
+ progress 18udev_net_rules.sh 80
+ :
+ source /root/post/18udev_net_rules.sh
+++ lspci
+++ grep -i net
+++ wc -l
++ AN=4
++ ANN=3
++ i=0
++ TE=0
++ '[' 0 -le 3 ']'
++ ifconfig eth0
++ ethtool -i eth0
++ grep ixg
++ i=1
++ '[' 1 -le 3 ']'
++ ifconfig eth1
++ ethtool -i eth1
++ grep ixg
++ i=2
++ '[' 2 -le 3 ']'
++ ifconfig eth2
++ ethtool -i eth2
++ grep ixg
driver: ixgbe
++ TE=1
++ i=3
++ '[' 3 -le 3 ']'
++ ifconfig eth3
++ ethtool -i eth3
++ grep ixg
driver: ixgbe
++ TE=2
++ i=4
++ '[' 4 -le 3 ']'
++ GE=2
++ GEN=1
++ echo rh62-x86-64
++ grep 'rh6[0-9]'
rh62-x86-64
++ '[' XYES == XYES ']'
++ :
++ ethtool -i eth0
++ grep ixg
++ i=0
++ '[' 0 -le 1 ']'
+++ expr 0 + 2
++ n=2
++ udev_name=eth2
++ echo eth2
eth2
+++ ifconfig eth0
+++ grep eth0
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:05:e1:b1
++ '[' X6c:92:bf:05:e1:b1 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:05:e1:b1", ATTR{type}=="1", KERNEL=="eth*", NAME="eth2"'
++ i=1
++ '[' 1 -le 1 ']'
+++ expr 1 + 2
++ n=3
++ udev_name=eth3
++ echo eth3
eth3
+++ ifconfig eth1
+++ grep eth1
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:05:e1:b0
++ '[' X6c:92:bf:05:e1:b0 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:05:e1:b0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth3"'
++ i=2
++ '[' 2 -le 1 ']'
++ i=2
++ '[' 2 -le 3 ']'
+++ expr 2 - 2
++ n=0
++ udev_name=eth0
++ echo eth0
eth0
+++ ifconfig eth2
+++ grep eth2
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:04:06:24
++ '[' X6c:92:bf:04:06:24 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:04:06:24", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"'
++ i=3
++ '[' 3 -le 3 ']'
+++ expr 3 - 2
++ n=1
++ udev_name=eth1
++ echo eth1
eth1
+++ ifconfig eth3
+++ grep eth3
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:04:06:25
++ '[' X6c:92:bf:04:06:25 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:04:06:25", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"'
++ i=4
++ '[' 4 -le 3 ']'
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/19sm843_fwupdate.sh
+ progress 19sm843_fwupdate.sh 80
+ :
+ source /root/post/19sm843_fwupdate.sh
++ wget -q -P /tmp/ http://10.120.109.155:8888/ngis/download/hdparm
++ HDPARM=/tmp/hdparm
++ chmod +x /tmp/hdparm
++ new_fw_version=DXM04D1Q
++ MEGACLI=/opt/MegaRAID/MegaCli/MegaCli64
++ NEED_UPDATA=false
++ IS_AHCI=false
++ IS_MEGARAID=false
++ /sbin/lspci
++ grep MegaRAID
++ '[' 1 -eq 0 ']'
+++ lsscsi
+++ grep sda
+++ awk -F: '{print $1}'
++ scsi_host='[7]'
++ /usr/bin/lsscsi -H
++ grep '[7]'
++ grep ahci
++ '[' 1 -eq 0 ']'
++ fw_update
++ fw_check
++ false
++ false
++ wget -q -P /tmp http://10.120.109.155:8888/ngis/download/samsung_sm843_ssd_fw/DXM04D1Q_NF_0729.bin
++ FWPATH=/tmp/DXM04D1Q_NF_0729.bin
++ rpm -ivh http://10.120.109.155:8888/ngis/download//samsung_sm843_ssd_fw/storcli-1.01.10-1.noarch.rpm
++ STROCLI=/opt/MegaRAID/storcli/storcli64
++ false
++ false
++ fw_check
++ false
++ false
++ exitall
++ rm -rf /tmp/DXM04D1Q_NF_0729.bin
++ rpm -ql storcli-1.01.10-1.noarch
++ '[' 0 -eq 0 ']'
++ rpm -e storcli-1.01.10-1.noarch
++ rm -rf /tmp/hdparm
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/99clean.sh
+ progress 99clean.sh 80
+ :
+ source /root/post/99clean.sh
++ rm -f /etc/ssh/ssh_host_dsa_key /etc/ssh/ssh_host_key /etc/ssh/ssh_host_rsa_key /etc/ssh/ssh_host_dsa_key.pub /etc/ssh/ssh_host_key.pub /etc/ssh/ssh_host_rsa_key.pub /var/cfengine/cfengine_lock_db /root/backup/slcn_start.sh
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ cat /etc/init.d/DragoonAgent
#!/bin/sh
#****************************************************************#
# ScriptName: DragoonInit.sh
# Author: Exp 
# Create Date: 2009-12-20
# Modify Author: 
# Modify Date: 2009-12-20
# Function: DragoonAgent for chkconfig 
#***************************************************************#

# DragoonAgent          Start/Stop the DragoonAgent daemon.
#
# chkconfig: 2345 20 80
# description: DragoonAgent is a standard Monitoring UNIX program for alibaba
# processname: DragoonAgent
# config: 
# pidfile: /usr/alisys/dragoon/var/DragoonAgent.pid

# Source function library
. /etc/rc.d/init.d/functions

RETVAL=0
ARGS=""
prog="DragoonAgent"
CONFIG=
DRAGOONAGENT_HOME=/usr/alisys/dragoon
DRAGOONAGENT_OWNER=root

start () {
	/usr/alisys/dragoon/bin/agent.sh  start
}
stop () {
	/usr/alisys/dragoon/bin/agent.sh  stop
}


case "$1" in
  start)
		start
        ;;
  stop)
		stop
        ;;
  status)
        status $prog
        ;;
  restart|reload)
        stop
        sleep 1
        start
        ;;
  *)
        echo $"Usage: $0 {start|stop|status|restart|reload}"
        exit 3
esac

exit $?

++ crontab -r
no crontab for root
++ :
++ rm -rf /root/backup
++ mkdir -p /root/backup/
++ :
++ yum clean all
Loaded plugins: security
Cleaning repos: alibase.6Server.noarch alibase.6Server.x86_64 ops.6Server.noarch
              : ops.6Server.x86_64 redhat.6Server.base.x86_64
              : redhat.6Server.updates.x86_64
Cleaning up Everything
++ rm -f /usr/local/sbin/cronolog
++ rm -f /usr/local/sbin/cronosplit
++ sed -i /yum.alidc.net/d /etc/hosts
++ touch /root/backup/dnsupdate
++ rm -fr /var/lib/rpm/__db.001 /var/lib/rpm/__db.002 /var/lib/rpm/__db.003 /var/lib/rpm/__db.004
++ rpm -v --rebuilddb
++ echo CLEAN_FLAG
CLEAN_FLAG
++ sed -i 's/^hiddenmenu/#hiddenmenu/' /boot/grub/grub.conf
++ sed -i 's/^splashimage/#splashimage/' /boot/grub/grub.conf
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 crashkernel=auto console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.el6.x86_64.img
++ sed -i /timeout=120/d /etc/yum.conf
++ rm -f '/etc/resolv.conf.predhclient*'
++ rpm -qa
++ wc -l
707
+ '[' -e /tmp/install_E_flag ']'
+ cp -f /root/214202338 /var/clone/
+ cp -f /root/cloneinfo /var/clone/
+ mv -f /root/install_warn.log /var/clone/
mv: cannot stat `/root/install_warn.log': No such file or directory
+ rm -rf /root/post/
+ mv -f /root/post.tgz /var/clone/
+ rm -rf /root/.oob/
++ '[' -e /mnt/sysimage/tmp/install_E_flag ']'
++ progress chroot_post_ok 85
++ :
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls [5-9]*.sh`'
+ source /root/80ngis_install_post.sh
+ tee -a /root/install.log
++ rm -f /mnt/sysimage/rh62-x86-64.tgz
++ echo 'the install time is:'
the install time is:
++ date
Thu Jul 17 14:33:49 EDT 2014
++ mkdir -p /mnt/sysimage/var/clone/
++ cp -f /root/install.log /mnt/sysimage/var/clone/
++ cp -f /root/ph_create.log /mnt/sysimage/var/clone/
cp: cannot stat `/root/ph_create.log': No such file or directory
++ cp -f /root/install_warn.log /mnt/sysimage/var/clone/
++ sync
++ cp -f /root/run.log /mnt/sysimage/var/clone/run.log
