Shutting down ntpd: [60G[[0;31mFAILED[0;39m]
Stopping DragoonAgent: 					 [;32m[  OK  ][0m
Stopping DragoonAgent: 					 [;32m[  OK  ][0m
Starting DragoonAgent: 					 [;32m[  OK  ][0m
NGIS_SHELL_FLAG
00pre_ngis_install.sh
01wait_install.sh
02get_install_conf.sh
04get_oob_console_tty.sh
40format.sh
45ALcache_part.sh
45ALdefault_part.sh
48ALmd_part.sh
50mkos_dir.sh
52install_ostar.sh
53create_fstab.sh
54create_yumconf.sh
70pre_chroot.sh
71chroot_post.sh
80ngis_install_post.sh
ILO_LICENSE.sh
initrdconf.log
install.log
ngis.tgz
ngis_function.sh
ngis_install.sh
post.tgz
run.log
shell
yum_conf
ALOS=rh62-x86-64
ALIP=61.183.52.211
ALHN=cache11
ALPART=ALcache
ALBIGAPP=cache_server
ALDOMAIN=cn109
ALROOM=cn109
ALSERVICETAG=214202338
ALSITE=cn109
NETMOD=NOBOND
ALDISK=/dev/sda
OOB=10.120.109.211
IPPOOL=61.183.52.128/25
NETMASK=255.255.255.128
GATEWAY=61.183.52.247
IVIP1=61.183.52.240
IVIP2=61.183.52.250
WVIP1=61.183.52.241
WVIP2=61.183.52.251
WVIP3=61.183.52.242
WVIP4=61.183.52.252
WVIP5=61.183.52.243
WVIP6=61.183.52.253
NF5270M3`/tmp/214202338' -> `/root/214202338'
ALL_ENDparametersis:
END_PATH:/sbin:/usr/sbin:/bin:/usr/bin:/usr/alisys/dragoon/libexec/
END_DHCPIP:10.120.109.200
END_IP16:0A786D
END_SERVICETAG:214202338
END_W_KS:10.120.109.155
END_KS:10.120.109.155
END_ALSITE:cn109
END_MAC:
END_DISK:/dev/sda
END_DISKP:/dev/sda
END_ALDOMAIN:cn109
EDN_ALOWN0:
END_ALOWN1:
END_ALBIGAPP:cache_server
END_ALAPP:
END_ALOS:rh62-x86-64
END_ALOSr:6
END_ALIP:61.183.52.211
END_ALHOSTNAME:cache11
END_armory_SN:
END_ALPART:ALcache
END_W_KS:10.120.109.155
ALROOT:cn109
NF5270M3 Not support now,Plz connect to shoukun.taosk@alibaba-inc.com
FSBR:ERROR
CONSOLE:ERROR
IPMILANCHANNEL:ERROR
rh62-x86-64
Filesystem label=
OS type: Linux
Block size=1024 (log=0)
Fragment size=1024 (log=0)
64256 inodes, 257008 blocks
12850 blocks (5.00%) reserved for the super user
First data block=1
Maximum filesystem blocks=67371008
32 block groups
8192 blocks per group, 8192 fragments per group
2008 inodes per group
Superblock backups stored on blocks: 
	8193, 24577, 40961, 57345, 73729, 204801, 221185

Writing inode tables:  0/32 1/32 2/32 3/32 4/32 5/32 6/32 7/32 8/32 9/3210/3211/3212/3213/3214/3215/3216/3217/3218/3219/3220/3221/3222/3223/3224/3225/3226/3227/3228/3229/3230/3231/32done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 37 mounts or
180 days, whichever comes first.  Use tune4fs -c or -i to override.
tune2fs 1.39 (29-May-2006)
tune2fs 1.39 (29-May-2006)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
1250928 inodes, 5002239 blocks
250111 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=4294967296
153 block groups
32768 blocks per group, 32768 fragments per group
8176 inodes per group
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000

Writing inode tables:   0/153  1/153  2/153  3/153  4/153  5/153  6/153  7/153  8/153  9/153 10/153 11/153 12/153 13/153 14/153 15/153 16/153 17/153 18/153 19/153 20/153 21/153 22/153 23/153 24/153 25/153 26/153 27/153 28/153 29/153 30/153 31/153 32/153 33/153 34/153 35/153 36/153 37/153 38/153 39/153 40/153 41/153 42/153 43/153 44/153 45/153 46/153 47/153 48/153 49/153 50/153 51/153 52/153 53/153 54/153 55/153 56/153 57/153 58/153 59/153 60/153 61/153 62/153 63/153 64/153 65/153 66/153 67/153 68/153 69/153 70/153 71/153 72/153 73/153 74/153 75/153 76/153 77/153 78/153 79/153 80/153 81/153 82/153 83/153 84/153 85/153 86/153 87/153 88/153 89/153 90/153 91/153 92/153 93/153 94/153 95/153 96/153 97/153 98/153 99/153100/153101/153102/153103/153104/153105/153106/153107/153108/153109/153110/153111/153112/153113/153114/153115/153116/153117/153118/153119/153120/153121/153122/153123/153124/153125/153126/153127/153128/153129/153130/153131/153132/153133/153134/153135/153136/153137/153138/153139/153140/153141/153142/153143/153144/153145/153146/153147/153148/153149/153150/153151/153152/153done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 37 mounts or
180 days, whichever comes first.  Use tune4fs -c or -i to override.
tune2fs 1.39 (29-May-2006)
tune2fs 1.39 (29-May-2006)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
1875968 inodes, 7502347 blocks
375117 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=4294967296
229 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000

Writing inode tables:   0/229  1/229  2/229  3/229  4/229  5/229  6/229  7/229  8/229  9/229 10/229 11/229 12/229 13/229 14/229 15/229 16/229 17/229 18/229 19/229 20/229 21/229 22/229 23/229 24/229 25/229 26/229 27/229 28/229 29/229 30/229 31/229 32/229 33/229 34/229 35/229 36/229 37/229 38/229 39/229 40/229 41/229 42/229 43/229 44/229 45/229 46/229 47/229 48/229 49/229 50/229 51/229 52/229 53/229 54/229 55/229 56/229 57/229 58/229 59/229 60/229 61/229 62/229 63/229 64/229 65/229 66/229 67/229 68/229 69/229 70/229 71/229 72/229 73/229 74/229 75/229 76/229 77/229 78/229 79/229 80/229 81/229 82/229 83/229 84/229 85/229 86/229 87/229 88/229 89/229 90/229 91/229 92/229 93/229 94/229 95/229 96/229 97/229 98/229 99/229100/229101/229102/229103/229104/229105/229106/229107/229108/229109/229110/229111/229112/229113/229114/229115/229116/229117/229118/229119/229120/229121/229122/229123/229124/229125/229126/229127/229128/229129/229130/229131/229132/229133/229134/229135/229136/229137/229138/229139/229140/229141/229142/229143/229144/229145/229146/229147/229148/229149/229150/229151/229152/229153/229154/229155/229156/229157/229158/229159/229160/229161/229162/229163/229164/229165/229166/229167/229168/229169/229170/229171/229172/229173/229174/229175/229176/229177/229178/229179/229180/229181/229182/229183/229184/229185/229186/229187/229188/229189/229190/229191/229192/229193/229194/229195/229196/229197/229198/229199/229200/229201/229202/229203/229204/229205/229206/229207/229208/229209/229210/229211/229212/229213/229214/229215/229216/229217/229218/229219/229220/229221/229222/229223/229224/229225/229226/229227/229228/229done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 30 mounts or
180 days, whichever comes first.  Use tune4fs -c or -i to override.
tune2fs 1.39 (29-May-2006)
tune2fs 1.39 (29-May-2006)
Setting up swapspace version 1, size = 2056314 kB
LABEL=SWAP, no uuid
FDISK_FLAG

Disk /dev/sda: 480.1 GB, 480103981056 bytes
255 heads, 63 sectors/track, 58369 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          32      257008+  83  Linux
/dev/sda2              33        2523    20008957+  83  Linux
/dev/sda3            2524        2773     2008125   82  Linux swap / Solaris
/dev/sda4            2774       58369   446574870    5  Extended
/dev/sda5            2774        6509    30009388+  83  Linux
/dev/sda6            6510       58369   416565418+  83  Linux

Disk /dev/sdb: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdc: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdd: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sde: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdf: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdg: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdh: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdi: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdj: 2000.3 GB, 2000398934016 bytes
255 heads, 63 sectors/track, 243201 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdk: 480.1 GB, 480103981056 bytes
255 heads, 63 sectors/track, 58369 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes


Disk /dev/sdl: 480.1 GB, 480103981056 bytes
255 heads, 63 sectors/track, 58369 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
++ progress mk_and_mount_dir 40
++ :
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/proc /proc/mounts
++ echo '/mnt/sysimage/proc does not mount'
/mnt/sysimage/proc does not mount
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/sys /proc/mounts
++ echo '/mnt/sysimage/sys does not mount'
/mnt/sysimage/sys does not mount
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/dev /proc/mounts
++ echo '/mnt/sysimage/dev does not mount'
/mnt/sysimage/dev does not mount
++ for i in proc sys dev selinux
++ grep -q /mnt/sysimage/selinux /proc/mounts
++ echo '/mnt/sysimage/selinux does not mount'
/mnt/sysimage/selinux does not mount
++ '[' XALcache = XNONO -o XALcache = XALmysql ']'
++ '[' XALcache = XALxen ']'
++ '[' XALcache = XALoracle ']'
++ '[' XALcache = XALdb -o XALcache = XALdbtest ']'
++ '[' XALcache = XALdefault -o XALcache = XALcache -o XALcache = XALqdyunti ']'
++ mount_default_dir
++ mkdir -p /mnt/sysimage
++ mount /dev/sda2 /mnt/sysimage
++ mkdir /mnt/sysimage/boot
++ mount /dev/sda1 /mnt/sysimage/boot
++ mkdir /mnt/sysimage/home
++ mount /dev/sda5 /mnt/sysimage/home
++ '[' XALcache = XALhmxen ']'
++ '[' XALcache = XALmd ']'
++ mkdir -p /mnt/sysimage/etc
++ mkdir -p /mnt/sysimage/sys
++ mkdir -p /mnt/sysimage/dev
++ mkdir -p /mnt/sysimage/proc
++ mkdir -p /mnt/sysimage/selinux
++ mkdir -p /mnt/sysimage/var/lib/rpm
++ mkdir -p /mnt/sysimage/var/lib/yum
++ mkdir -p /mnt/sysimage/var/lock
++ mkdir -p /mnt/sysimage/initrd
++ mount --bind /proc/ /mnt/sysimage/proc/
++ mount --bind /sys/ /mnt/sysimage/sys/
++ mount --bind /dev/ /mnt/sysimage/dev/
++ mount --bind /selinux/ /mnt/sysimage/selinux/
++ echo MOUNT_FLAG
MOUNT_FLAG
++ mount
proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
/dev/sda2 on /mnt/sysimage type ext4 (rw)
/dev/sda1 on /mnt/sysimage/boot type ext4 (rw)
/dev/sda5 on /mnt/sysimage/home type ext4 (rw)
/proc on /mnt/sysimage/proc type none (rw,bind)
/sys on /mnt/sysimage/sys type none (rw,bind)
/dev on /mnt/sysimage/dev type none (rw,bind)
/selinux on /mnt/sysimage/selinux type none (rw,bind)
++ mount
++ grep -q /mnt/sysimage
++ :
++ progress start_wget_os_tgz 45
++ :
++ case $ALBIGAPP in
++ W_OS=rh62-x86-64
++ touch /mnt/sysimage/filesystemtest
++ rm -f /mnt/sysimage/filesystemtest
++ wget -nv -T5 -t5 http://10.120.109.155:8888/ngis/ostar/rh62-x86-64.tgz -P /mnt/sysimage/
2014-07-17 14:32:04 URL:http://10.120.109.155:8888/ngis/ostar/rh62-x86-64.tgz [656689869/656689869] -> "/mnt/sysimage/rh62-x86-64.tgz" [1]
++ '[' 0 -ne 0 ']'
++ cd /mnt/sysimage
++ md5sum rh62-x86-64.tgz
e41a8b7e25055529f9b1b2df24c91581  rh62-x86-64.tgz
++ progress start_tar_os_tgz 50
++ :
++ echo install_system...........rh62-x86-64.....
install_system...........rh62-x86-64.....
++ tar -xzpf rh62-x86-64.tgz
++ echo OSTAR_FLAG
OSTAR_FLAG
++ ls /mnt/sysimage -h
bin
boot
cgroup
dev
etc
home
initrd
lib
lib64
lost+found
media
mnt
opt
proc
rh62-x86-64.tgz
root
sbin
selinux
srv
sys
tmp
usr
var
++ progress create_fstab 55
++ :
++ rm -f /mnt/sysimage/etc/mtab
++ rm -f /mnt/sysimage/etc/fstab
++ touch /mnt/sysimage/etc/mtab
++ touch /mnt/sysimage/etc/fstab
++ '[' XALcache = XNONO -o XALcache = XALmysql ']'
++ '[' XALcache = XALxen ']'
++ '[' XALcache = XALoracle ']'
++ '[' XALcache = XALdefault -o XALcache = XALcache -o XALcache = XALqdyunti ']'
++ create_default_fstab
++ echo rh62-x86-64
++ grep rh6
rh62-x86-64
++ cat
++ '[' XALcache = XALdb -o XALcache = XALdbtest ']'
++ '[' XALcache = XALhmxen ']'
++ '[' XALcache = XALmd ']'
++ echo FSTAB_FLAG
FSTAB_FLAG
++ cat /mnt/sysimage/etc/fstab
LABEL=/                 /                       ext4    defaults        1 1
LABEL=/boot             /boot                   ext4    defaults        1 2
LABEL=/home             /home                   ext4    defaults        1 2
tmpfs                   /dev/shm                tmpfs   defaults        0 0
devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
sysfs                   /sys                    sysfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0
LABEL=SWAP              swap                    swap    defaults        0 0
++ cat /mnt/sysimage/etc/mtab
++ egrep '(\/sysimage |\/sysimage\/boot)' /etc/mtab
++ sed -r -e 's/\/mnt\/sysimage(\/)?/\//' /etc/mtab
++ cat /mnt/sysimage/etc/mtab
proc /proc proc rw 0 0
sysfs /sys sysfs rw 0 0
devpts /dev/pts devpts rw,gid=5,mode=620 0 0
/dev/sda2 / ext4 rw 0 0
/dev/sda1 /boot ext4 rw 0 0
/dev/sda5 /home ext4 rw 0 0
/proc /proc none rw,bind 0 0
/sys /sys none rw,bind 0 0
/dev /dev none rw,bind 0 0
/selinux /selinux none rw,bind 0 0
++ progress create_yumconf 55
++ :
++ echo rh62-x86-64
++ grep rh53-x86-64
++ :
++ echo YUMCONF_FLAG
YUMCONF_FLAG
++ cp -f /root/hosts /mnt/sysimage/etc/hosts
++ cat /mnt/sysimage/etc/hosts
# Do not remove the following line, or various programs
# that require network functionality will fail.
127.0.0.1		localhost.localdomain localhost
110.75.20.129   yum.tbsite.net
61.183.52.211 cache11.cn109 cache11
  
++ rm -f /mnt/sysimage/var/cfengine/ppkeys/localhost.pub
++ rm -f /mnt/sysimage/var/cfengine/ppkeys/localhost.priv
++ rm -f /mnt/sysimage/root/post/
++ '[' XERROR == X ']'
++ mkdir -p /mnt/sysimage/root/post/
++ touch /mnt/sysimage/root/post/filesystemtest
++ '[' 0 '!=' 0 ']'
++ rm -f /mnt/sysimage/root/post/filesystemtest
++ cp -f /root/214202338 /mnt/sysimage/root/214202338
++ cp -f /root/214202338 /mnt/sysimage/root/cloneinfo
++ tar -zxvf /root/post.tgz -C /mnt/sysimage/root/post/
./
./17HTconfig.sh
./19sm843_fwupdate.sh
./03get_kernel.sh
./16oob_os_init.sh
./01grub_install.sh
./15modify_secure.sh
./99clean.sh
./13modify_postgres.sh
./08modify_rclocal.sh
./07modify_ip.sh
./18udev_net_rules.sh
./ngis_post.sh
./05create_initrd.sh
./04bug_mod_and_modprobe_conf.sh
./09modify_chkconfig.sh
++ cp -f /root/post.tgz /mnt/sysimage/root/
++ chmod 755 /mnt/sysimage/root/post/
++ rm -f /mnt/sysimage/etc/resolv.conf
++ cp -f /root/resolv.conf /mnt/sysimage/etc/resolv.conf
++ echo RESOLVE_FLAG
RESOLVE_FLAG
++ cat /mnt/sysimage/etc/resolv.conf
search tbsite.net
nameserver 8.8.8.8
nameserver 110.75.1.30
nameserver 114.114.114.114
options attempts:1 timeout:1
++ '[' -e /tmp/agent_install.sh ']'
++ wget -T2 -t2 -O /tmp/agent_install.sh http://agent-update.b2b.alibaba-inc.com/agent/agent_install.sh
--2014-07-17 14:32:23--  http://agent-update.b2b.alibaba-inc.com/agent/agent_install.sh
Resolving agent-update.b2b.alibaba-inc.com... 172.16.200.1
Connecting to agent-update.b2b.alibaba-inc.com|172.16.200.1|:80... failed: Network is unreachable.
++ wget -T2 -t2 -O /tmp/agent_install.sh http://gw.dragoon.alibaba-inc.com/agent/agent_install.sh
--2014-07-17 14:32:23--  http://gw.dragoon.alibaba-inc.com/agent/agent_install.sh
Resolving gw.dragoon.alibaba-inc.com... failed: Temporary failure in name resolution.
wget: unable to resolve host address `gw.dragoon.alibaba-inc.com'
++ cp -f /tmp/agent_install.sh /mnt/sysimage/tmp/
++ progress start_chroot_post 70
++ :
++ rm -f /tmp/install_E_flag
++ rm -f /mnt/sysimage/tmp/install_E_flag
++ chroot /mnt/sysimage sh -x /root/post/ngis_post.sh
++ tee -a /root/post.log
+ E_file=/tmp/install_E_flag
+ W_file=/root/install_warn.log
+ ALAPP=
+ ALARMORYSN=
+ ALBIGAPP=
+ ALBIOS=
+ ALDHCPIP=
+ ALDOMAIN=
+ KS=
+ ALHN=
+ ALIP=
+ ALMAC=
+ ALOS=
+ ALOWN1=
+ ALOWN0=
+ ALPART=
+ ALRAID=
+ ALSERVICETAG=
+ ALSITE=
+ ALTMPLT=
+ ALCPM=
+ '[' '' == '' ']'
++ /usr/sbin/dmidecode -s system-serial-number
++ grep -v '^#'
++ sed 's/ //g'
+ ALSERVICETAG=214202338
+ '[' -e /root/214202338 ']'
+ source /root/214202338
++ ALBIGAPP=cache_server
++ ALDISK=/dev/sda
++ ALDOMAIN=cn109
++ ALHN=cache11
++ ALIP=61.183.52.211
++ ALOS=rh62-x86-64
++ ALPART=ALcache
++ ALROOM=cn109
++ ALSERVICETAG=214202338
++ ALSITE=cn109
++ DHCPETH=eth2
++ GATEWAY=61.183.52.247
++ IPPOOL=61.183.52.128/25
++ IVIP1=61.183.52.240
++ IVIP2=61.183.52.250
++ KS=10.120.109.155
++ NETMASK=255.255.255.128
++ NETMOD=NOBOND
++ OOB=10.120.109.211
++ WVIP1=61.183.52.241
++ WVIP2=61.183.52.251
++ WVIP3=61.183.52.242
++ WVIP4=61.183.52.252
++ WVIP5=61.183.52.243
++ WVIP6=61.183.52.253
++ DISK_SIZE=480
++ ETH0=eth2
++ ETH0_MAC=6C:92:BF:04:06:24
++ ETH1=eth3
++ ETH1_MAC=6C:92:BF:04:06:25
++ RECOVER=NO
++ MACBOND=YES
++ FSBR=ERROR
++ CONSOLE=ERROR
++ IPMILANCHANNEL=ERROR
+ '[' 214202338 == '' ']'
++ /sbin/ifconfig
++ grep 'inet addr'
++ grep -v 127.0.0.1
++ grep -v 255.255.255.255
++ awk '{print $2}'
++ awk -F: '{print $2}'
++ sed -n 1p
+ ALDHCPIP=10.120.109.200
+ '[' 61.183.52.211 == '' ']'
+ ALHOSTNAME=cache11
+ '[' cache11 == '' ']'
+ '[' XALcache = XALpg ']'
+ KERNEL=
+ KERNELi=
+ KERNELc=
+ KERNELxen=
+ SMTP=
+ VLAN=
+ '[' Xeth2 = X ']'
+ '[' X255.255.255.128 == X ']'
+ VLAN=vlan
+ '[' X61.183.52.247 == X ']'
+ mkdir -p /var/clone/
++ ls /root/post/01grub_install.sh /root/post/03get_kernel.sh /root/post/04bug_mod_and_modprobe_conf.sh /root/post/05create_initrd.sh /root/post/07modify_ip.sh /root/post/08modify_rclocal.sh /root/post/09modify_chkconfig.sh /root/post/13modify_postgres.sh /root/post/15modify_secure.sh /root/post/16oob_os_init.sh /root/post/17HTconfig.sh /root/post/18udev_net_rules.sh /root/post/19sm843_fwupdate.sh /root/post/99clean.sh
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/01grub_install.sh
+ progress 01grub_install.sh 80
+ :
+ source /root/post/01grub_install.sh
++ rm -f /etc/resolv.conf.predhclient
++ '[' 480 -gt 2300 ']'
++ rm -f /boot/grub/device.map
++ echo /dev/sda
++ grep /dev/sd
++ echo '(hd0)   /dev/sda'
++ '[' ALcache = ALmd ']'
++ grub-install --root-directory=/ /dev/sda --no-floppy
Installation finished. No error reported.
This is the contents of the device map //boot/grub/device.map.
Check if this is correct or not. If any of the lines is incorrect,
fix it and re-run the script `grub-install'.

(hd0)   /dev/sda
++ echo /dev/sda
++ grep -i -q cciss
++ '[' 1 '!=' 0 ']'
++ echo /dev/sda
++ grep -i -q cciss
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0
	initrd /initramfs-2.6.32-220.el6.x86_64.img
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/03get_kernel.sh
+ progress 03get_kernel.sh 80
+ :
+ source /root/post/03get_kernel.sh
++ rpm_install_ali_kernel
++ echo rh62-x86-64
++ grep 'rh5[0-9]'
++ echo rh62-x86-64
++ grep 'alirh6[0-9]'
++ echo rh62-x86-64
++ grep 'rh6[0-9]'
rh62-x86-64
++ KERVEL_VER=2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ mkdir /tmp/kernel
++ wget -T5 -t5 -nv -P /tmp/kernel/ http://10.120.109.155:8888/ngis/software/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
2014-07-18 02:32:30 URL:http://10.120.109.155:8888/ngis/software/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm [20085864/20085864] -> "/tmp/kernel/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm" [1]
++ wget -T5 -t5 -nv -P /tmp/kernel/ http://10.120.109.155:8888/ngis/software/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
2014-07-18 02:32:30 URL:http://10.120.109.155:8888/ngis/software/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm [6557672/6557672] -> "/tmp/kernel/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm" [1]
++ wget -T5 -t5 -nv -P /tmp/kernel/ http://10.120.109.155:8888/ngis/software/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
2014-07-18 02:32:31 URL:http://10.120.109.155:8888/ngis/software/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm [7531860/7531860] -> "/tmp/kernel/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm" [1]
++ rpm -ivh /tmp/kernel/tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
Preparing...                ##################################################
tcp-kernel-firmware         ##################################################
++ rpm -ivh /tmp/kernel/tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
Preparing...                ##################################################
tcp-kernel                  ##################################################
++ rpm -ivh /tmp/kernel/tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.rpm
Preparing...                ##################################################
tcp-kernel-devel            ##################################################
++ grep 2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 /boot/grub/grub.conf
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0 crashkernel=auto
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
++ get_base_kernel_ver
++ case $ALOS in
++ BASE_KERNEL=2.6.32-220.el6.x86_64
++ case $ALBIGAPP in
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0 crashkernel=auto
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb rd_NO_LVM rhgb quiet rd_NO_DM numa=off biosdevname=0
	initrd /initramfs-2.6.32-220.el6.x86_64.img
++ KERNELi=2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ echo GET_KERNEL_FLAG
GET_KERNEL_FLAG
++ rpm -qa
++ grep kernel
tcp-kernel-firmware-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
libreport-plugin-kerneloops-2.0.5-20.el6.x86_64
kernel-headers-2.6.32-220.el6.x86_64
kernel-devel-2.6.32-220.el6.x86_64
abrt-addon-kerneloops-2.0.4-14.el6.x86_64
tcp-kernel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
kernel-2.6.32-220.el6.x86_64
kernel-firmware-2.6.32-220.el6.noarch
dracut-kernel-004-256.el6.noarch
tcp-kernel-devel-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ echo 2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ /sbin/grubby --update-kernel ALL --grub --remove-args=rhgb
++ /sbin/grubby --update-kernel ALL --grub --remove-args=quiet
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/04bug_mod_and_modprobe_conf.sh
+ progress 04bug_mod_and_modprobe_conf.sh 80
+ :
+ source /root/post/04bug_mod_and_modprobe_conf.sh
++ bug_cve_2009_2692
++ FL=/etc/modprobe.conf
+++ echo rh62-x86-64
+++ cut -c3
++ OSr=6
++ '[' X6 = X3 ']'
++ '[' X6 = X4 ']'
++ '[' X6 = X5 ']'
++ bug_disable_ipv6
++ '[' Xcn109 = XALinc -o Xcn109 = XALqd -o Xcn109 = Xkfc ']'
++ bug_netxtreme2
+++ echo rh62-x86-64
+++ cut -c3
++ OSr=6
++ '[' X6 = X5 ']'
++ update_modules
++ for i in '/lib/modules/*'
+++ basename /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ i=2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
++ '[' -e /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/extra/mpt2sas.ko ']'
++ wget -O /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/extra/mpt2sas.ko http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 404 Not Found
2014-07-18 02:33:00 ERROR 404: Not Found.

++ '[' 8 == 0 ']'
++ rm -f /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/extra/mpt2sas.ko
++ '[' -e /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/updates/igb.ko ']'
++ wget -O /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/updates/igb.ko http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 404 Not Found
2014-07-18 02:33:00 ERROR 404: Not Found.

++ '[' 8 == 0 ']'
++ rm -f /lib/modules/2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64/updates/igb.ko
++ for i in '/lib/modules/*'
+++ basename /lib/modules/2.6.32-220.el6.x86_64
++ i=2.6.32-220.el6.x86_64
++ '[' -e /lib/modules/2.6.32-220.el6.x86_64/extra/mpt2sas.ko ']'
++ wget -O /lib/modules/2.6.32-220.el6.x86_64/extra/mpt2sas.ko http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/mpt2sas.ko-2.6.32-220.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 404 Not Found
2014-07-18 02:33:00 ERROR 404: Not Found.

++ '[' 8 == 0 ']'
++ rm -f /lib/modules/2.6.32-220.el6.x86_64/extra/mpt2sas.ko
++ '[' -e /lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko ']'
++ wget -O /lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.el6.x86_64
--2014-07-18 02:33:00--  http://10.120.109.155:8888/ngis/modules/igb.ko-2.6.32-220.el6.x86_64
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 200 OK
Length: 5274645 (5.0M) [application/x-troff-man]
Saving to: `/lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko'

     0K .......... .......... .......... .......... ..........  0% 8.78M 1s
    50K .......... .......... .......... .......... ..........  1% 10.0M 1s
   100K .......... .......... .......... .......... ..........  2% 10.2M 1s
   150K .......... .......... .......... .......... ..........  3% 11.9M 0s
   200K .......... .......... .......... .......... ..........  4% 11.7M 0s
   250K .......... .......... .......... .......... ..........  5% 10.8M 0s
   300K .......... .......... .......... .......... ..........  6% 12.4M 0s
   350K .......... .......... .......... .......... ..........  7% 10.1M 0s
   400K .......... .......... .......... .......... ..........  8% 14.8M 0s
   450K .......... .......... .......... .......... ..........  9% 16.3M 0s
   500K .......... .......... .......... .......... .......... 10% 12.7M 0s
   550K .......... .......... .......... .......... .......... 11% 15.4M 0s
   600K .......... .......... .......... .......... .......... 12% 12.9M 0s
   650K .......... .......... .......... .......... .......... 13% 13.1M 0s
   700K .......... .......... .......... .......... .......... 14% 18.5M 0s
   750K .......... .......... .......... .......... .......... 15% 13.0M 0s
   800K .......... .......... .......... .......... .......... 16% 17.9M 0s
   850K .......... .......... .......... .......... .......... 17% 13.0M 0s
   900K .......... .......... .......... .......... .......... 18% 21.7M 0s
   950K .......... .......... .......... .......... .......... 19% 23.8M 0s
  1000K .......... .......... .......... .......... .......... 20% 18.8M 0s
  1050K .......... .......... .......... .......... .......... 21% 27.0M 0s
  1100K .......... .......... .......... .......... .......... 22% 27.9M 0s
  1150K .......... .......... .......... .......... .......... 23% 18.5M 0s
  1200K .......... .......... .......... .......... .......... 24% 25.0M 0s
  1250K .......... .......... .......... .......... .......... 25% 19.8M 0s
  1300K .......... .......... .......... .......... .......... 26% 24.6M 0s
  1350K .......... .......... .......... .......... .......... 27% 26.4M 0s
  1400K .......... .......... .......... .......... .......... 28% 19.2M 0s
  1450K .......... .......... .......... .......... .......... 29% 22.1M 0s
  1500K .......... .......... .......... .......... .......... 30% 20.3M 0s
  1550K .......... .......... .......... .......... .......... 31% 25.6M 0s
  1600K .......... .......... .......... .......... .......... 32% 23.7M 0s
  1650K .......... .......... .......... .......... .......... 33% 18.9M 0s
  1700K .......... .......... .......... .......... .......... 33% 25.0M 0s
  1750K .......... .......... .......... .......... .......... 34% 21.2M 0s
  1800K .......... .......... .......... .......... .......... 35% 26.6M 0s
  1850K .......... .......... .......... .......... .......... 36% 25.0M 0s
  1900K .......... .......... .......... .......... .......... 37% 20.1M 0s
  1950K .......... .......... .......... .......... .......... 38% 22.9M 0s
  2000K .......... .......... .......... .......... .......... 39% 19.8M 0s
  2050K .......... .......... .......... .......... .......... 40% 22.8M 0s
  2100K .......... .......... .......... .......... .......... 41% 28.2M 0s
  2150K .......... .......... .......... .......... .......... 42% 20.1M 0s
  2200K .......... .......... .......... .......... .......... 43% 26.8M 0s
  2250K .......... .......... .......... .......... .......... 44% 27.5M 0s
  2300K .......... .......... .......... .......... .......... 45% 22.9M 0s
  2350K .......... .......... .......... .......... .......... 46% 24.8M 0s
  2400K .......... .......... .......... .......... .......... 47% 20.7M 0s
  2450K .......... .......... .......... .......... .......... 48% 25.2M 0s
  2500K .......... .......... .......... .......... .......... 49% 29.0M 0s
  2550K .......... .......... .......... .......... .......... 50% 18.5M 0s
  2600K .......... .......... .......... .......... .......... 51% 25.6M 0s
  2650K .......... .......... .......... .......... .......... 52% 20.0M 0s
  2700K .......... .......... .......... .......... .......... 53% 26.1M 0s
  2750K .......... .......... .......... .......... .......... 54% 23.2M 0s
  2800K .......... .......... .......... .......... .......... 55% 19.2M 0s
  2850K .......... .......... .......... .......... .......... 56% 23.4M 0s
  2900K .......... .......... .......... .......... .......... 57% 19.1M 0s
  2950K .......... .......... .......... .......... .......... 58% 24.0M 0s
  3000K .......... .......... .......... .......... .......... 59% 26.7M 0s
  3050K .......... .......... .......... .......... .......... 60% 19.5M 0s
  3100K .......... .......... .......... .......... .......... 61% 24.2M 0s
  3150K .......... .......... .......... .......... .......... 62% 18.8M 0s
  3200K .......... .......... .......... .......... .......... 63% 26.2M 0s
  3250K .......... .......... .......... .......... .......... 64% 25.5M 0s
  3300K .......... .......... .......... .......... .......... 65% 19.9M 0s
  3350K .......... .......... .......... .......... .......... 66% 21.8M 0s
  3400K .......... .......... .......... .......... .......... 66% 24.1M 0s
  3450K .......... .......... .......... .......... .......... 67% 21.8M 0s
  3500K .......... .......... .......... .......... .......... 68% 23.8M 0s
  3550K .......... .......... .......... .......... .......... 69% 19.6M 0s
  3600K .......... .......... .......... .......... .......... 70% 26.0M 0s
  3650K .......... .......... .......... .......... .......... 71% 26.3M 0s
  3700K .......... .......... .......... .......... .......... 72% 19.4M 0s
  3750K .......... .......... .......... .......... .......... 73% 26.0M 0s
  3800K .......... .......... .......... .......... .......... 74% 17.7M 0s
  3850K .......... .......... .......... .......... .......... 75% 25.5M 0s
  3900K .......... .......... .......... .......... .......... 76% 27.6M 0s
  3950K .......... .......... .......... .......... .......... 77% 18.2M 0s
  4000K .......... .......... .......... .......... .......... 78% 27.1M 0s
  4050K .......... .......... .......... .......... .......... 79% 22.3M 0s
  4100K .......... .......... .......... .......... .......... 80% 25.6M 0s
  4150K .......... .......... .......... .......... .......... 81% 24.6M 0s
  4200K .......... .......... .......... .......... .......... 82% 19.9M 0s
  4250K .......... .......... .......... .......... .......... 83% 24.6M 0s
  4300K .......... .......... .......... .......... .......... 84% 23.0M 0s
  4350K .......... .......... .......... .......... .......... 85% 22.5M 0s
  4400K .......... .......... .......... .......... .......... 86% 26.0M 0s
  4450K .......... .......... .......... .......... .......... 87% 18.7M 0s
  4500K .......... .......... .......... .......... .......... 88% 25.8M 0s
  4550K .......... .......... .......... .......... .......... 89% 34.7M 0s
  4600K .......... .......... .......... .......... .......... 90% 26.8M 0s
  4650K .......... .......... .......... .......... .......... 91% 38.3M 0s
  4700K .......... .......... .......... .......... .......... 92% 27.8M 0s
  4750K .......... .......... .......... .......... .......... 93% 36.2M 0s
  4800K .......... .......... .......... .......... .......... 94% 35.2M 0s
  4850K .......... .......... .......... .......... .......... 95% 27.3M 0s
  4900K .......... .......... .......... .......... .......... 96% 37.9M 0s
  4950K .......... .......... .......... .......... .......... 97% 31.9M 0s
  5000K .......... .......... .......... .......... .......... 98% 36.2M 0s
  5050K .......... .......... .......... .......... .......... 99% 34.0M 0s
  5100K .......... .......... .......... .......... .......... 99% 33.6M 0s
  5150K .                                                     100% 1.99M=0.2s

2014-07-18 02:33:00 (20.5 MB/s) - `/lib/modules/2.6.32-220.el6.x86_64/updates/igb.ko' saved [5274645/5274645]

++ '[' 0 == 0 ']'
++ depmod -a 2.6.32-220.el6.x86_64
++ echo BUGMOD_FLAG
BUGMOD_FLAG
++ cat /etc/modprobe.conf
cat: /etc/modprobe.conf: No such file or directory
++ ls -l /etc/modprobe.d/
total 32
-rw-r--r-- 1 root root   52 Sep 17  2012 anaconda.conf
-rw-r--r-- 1 root root  884 Nov  9  2011 blacklist.conf
-rw-r--r-- 1 root root  382 Aug 11  2010 dist-alsa.conf
-rw-r--r-- 1 root root  473 Aug 11  2010 dist-oss.conf
-rw-r--r-- 1 root root 5596 Aug 11  2010 dist.conf
-rw-r--r-- 1 root root   30 Oct 10  2009 openfwwf.conf
-rw-r--r-- 1 root root  326 Sep 17  2012 security.conf
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/05create_initrd.sh
+ progress 05create_initrd.sh 80
+ :
+ source /root/post/05create_initrd.sh
+++ lspci -n
+++ awk '{if($2~"0104|0100|0107|0106"){print $1}}'
+++ sed '/^$/d'
++ DISKTYPE='00:1f.2
04:00.0
06:00.0'
++ deps2=sd_mod
++ for j in '$DISKTYPE'
+++ lspci -n
+++ grep 00:1f.2
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $5}'
++ vendor_id=8086
+++ grep 00:1f.2
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $6}'
+++ lspci -n
++ device_id=1d02
+++ grep '0x00008086 0x00001d02' /lib/modules/2.6.32-220.el6.x86_64/modules.pcimap
+++ awk '{print $1}'
+++ sort
+++ uniq
++ driver=ahci
++ findmodule ahci
++ modName=ahci
++ deps=
++ '[' -z ahci ']'
++ moduledep ahci
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends ahci
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' ahci '!=' ahci ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ deps2='sd_mod ahci'
++ for j in '$DISKTYPE'
+++ lspci -n
+++ grep 04:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $5}'
++ vendor_id=1000
+++ lspci -n
+++ grep 04:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $6}'
++ device_id=0087
+++ grep '0x00001000 0x00000087' /lib/modules/2.6.32-220.el6.x86_64/modules.pcimap
+++ awk '{print $1}'
+++ sort
+++ uniq
++ driver=mpt2sas
++ findmodule mpt2sas
++ modName=mpt2sas
++ deps=
++ '[' -z mpt2sas ']'
++ moduledep mpt2sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends mpt2sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' raid_class '!=' mpt2sas ']'
+++ echo -n 'raid_class '
+++ read foo
+++ '[' scsi_transport_sas '!=' mpt2sas ']'
+++ echo -n 'scsi_transport_sas '
+++ read foo
+++ '[' mpt2sas '!=' mpt2sas ']'
+++ read foo
++ deps='raid_class scsi_transport_sas '
++ '[' -n 'raid_class scsi_transport_sas ' ']'
++ echo ': raid_class scsi_transport_sas '
: raid_class scsi_transport_sas 
++ for j in '$deps'
++ echo sd_mod ahci
++ grep -q raid_class
++ deps2='raid_class sd_mod ahci'
++ for j in '$deps'
++ echo raid_class sd_mod ahci
++ grep -q scsi_transport_sas
++ deps2='scsi_transport_sas raid_class sd_mod ahci'
++ for i in '$deps'
++ findmodule raid_class
++ modName=raid_class
++ deps=
++ '[' -z raid_class ']'
++ moduledep raid_class
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends raid_class
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' raid_class '!=' raid_class ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ for i in '$deps'
++ findmodule scsi_transport_sas
++ modName=scsi_transport_sas
++ deps=
++ '[' -z scsi_transport_sas ']'
++ moduledep scsi_transport_sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends scsi_transport_sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' scsi_transport_sas ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ deps2='scsi_transport_sas raid_class sd_mod ahci mpt2sas'
++ for j in '$DISKTYPE'
+++ lspci -n
+++ grep 06:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $5}'
++ vendor_id=8086
+++ lspci -n
+++ grep 06:00.0
+++ sed 's/Class //'
+++ awk '-F:| ' '{print $6}'
++ device_id=1d6b
+++ grep '0x00008086 0x00001d6b' /lib/modules/2.6.32-220.el6.x86_64/modules.pcimap
+++ awk '{print $1}'
+++ sort
+++ uniq
++ driver=isci
++ findmodule isci
++ modName=isci
++ deps=
++ '[' -z isci ']'
++ moduledep isci
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends isci
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' isci ']'
+++ echo -n 'scsi_transport_sas '
+++ read foo
+++ '[' libsas '!=' isci ']'
+++ echo -n 'libsas '
+++ read foo
+++ '[' isci '!=' isci ']'
+++ read foo
++ deps='scsi_transport_sas libsas '
++ '[' -n 'scsi_transport_sas libsas ' ']'
++ echo ': scsi_transport_sas libsas '
: scsi_transport_sas libsas 
++ for j in '$deps'
++ echo scsi_transport_sas raid_class sd_mod ahci mpt2sas
++ grep -q scsi_transport_sas
++ for j in '$deps'
++ echo scsi_transport_sas raid_class sd_mod ahci mpt2sas
++ grep -q libsas
++ deps2='libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas'
++ for i in '$deps'
++ findmodule scsi_transport_sas
++ modName=scsi_transport_sas
++ deps=
++ '[' -z scsi_transport_sas ']'
++ moduledep scsi_transport_sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends scsi_transport_sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' scsi_transport_sas ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ for i in '$deps'
++ findmodule libsas
++ modName=libsas
++ deps=
++ '[' -z libsas ']'
++ moduledep libsas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends libsas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' libsas ']'
+++ echo -n 'scsi_transport_sas '
+++ read foo
+++ '[' libsas '!=' libsas ']'
+++ read foo
++ deps='scsi_transport_sas '
++ '[' -n 'scsi_transport_sas ' ']'
++ echo ': scsi_transport_sas '
: scsi_transport_sas 
++ for j in '$deps'
++ echo libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas
++ grep -q scsi_transport_sas
++ for i in '$deps'
++ findmodule scsi_transport_sas
++ modName=scsi_transport_sas
++ deps=
++ '[' -z scsi_transport_sas ']'
++ moduledep scsi_transport_sas
+++ modprobe --set-version 2.6.32-220.el6.x86_64 --show-depends scsi_transport_sas
+++ awk '/^insmod / { print gensub(".*/","","g",$2) }'
+++ read foo
+++ '[' scsi_transport_sas '!=' scsi_transport_sas ']'
+++ read foo
++ deps=
++ '[' -n '' ']'
++ deps2='libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas isci'
+++ echo 'libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas isci'
+++ awk '{for(i=1;i<=NF;i++)if(++a[$i]==1){printf $i" "}}'
++ deps2='libsas scsi_transport_sas raid_class sd_mod ahci mpt2sas isci '
++ for i in '$deps2'
++ preload=' --preload libsas'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas'
++ for i in '$deps2'
++ preload=' --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci'
++ echo 'preload:  --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci'
preload:  --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci
++ rm -f /boot/initrd-2.6.32-220.el6.x86_64.img
++ echo rh62-x86-64
++ egrep -q '(6U2|rh6)'
++ rm -f /boot/initramfs-2.6.32-220.el6.x86_64.img
++ mkinitrd --preload libsas --preload scsi_transport_sas --preload raid_class --preload sd_mod --preload ahci --preload mpt2sas --preload isci /boot/initramfs-2.6.32-220.el6.x86_64.img 2.6.32-220.el6.x86_64
++ '[' -e /boot/initramfs-2.6.32-220.el6.x86_64.img ']'
++ return
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/07modify_ip.sh
+ progress 07modify_ip.sh 80
+ :
+ source /root/post/07modify_ip.sh
++ rm -rf /etc/sysconfig/network-scripts/ifcfg-eth0 /etc/sysconfig/network-scripts/ifcfg-eth1 /etc/sysconfig/network-scripts/ifcfg-eth2 /etc/sysconfig/network-scripts/ifcfg-eth3 /etc/sysconfig/network-scripts/ifcfg-eth4 /etc/sysconfig/network-scripts/ifcfg-eth5 /etc/sysconfig/network-scripts/ifcfg-eth7 /etc/sysconfig/network-scripts/ifcfg-eth8 /etc/sysconfig/network-scripts/ifcfg-eth9
++ echo rh62-x86-64
++ grep rh53-x86-64
++ '[' cn109 '!=' ALinc ']'
++ check_ip
++ v_ip=61.183.52.211
++ illegal_ip 61.183.52.211
+++ echo 61.183.52.211
+++ sed -ne '/^[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}$/p'
++ v_str3=61.183.52.211
++ '[' '!' 61.183.52.211 ']'
++ '[' 0 -eq 66 ']'
++ echo rh62-x86-64
++ grep rh53-x86-64
++ :
++ conflict_exist 61.183.52.211
++ ping -c 2 -W5 61.183.52.211
connect: Network is unreachable
++ '[' 2 == 0 ']'
++ '[' 0 -eq 66 ']'
++ ERROR=0
++ '[' X0 = X0 ']'
++ VIP=61.183.52.211
++ VHOSTNAME=cache11.cn109
++ '[' XNOBOND = XNOBOND -o XNOBOND = X ']'
++ cal_network
++ '[' cn109 == ALinc -o cn109 == ALqd -o Xcn109 = Xkfc ']'
++ return
++ create_ali_nobond
++ cat
++ '[' cache_server = cache_server -o cache_server = '*cache_server' ']'
++ VIP0=61.183.52.240
++ VIP1=61.183.52.250
++ create_lo 1
+++ eval echo '{0..1}'
++++ echo 0 1
++ for i in '$(eval echo {0..$1})'
++ eval 'ip=$VIP0'
+++ ip=61.183.52.240
++ cat
++ cat /etc/sysconfig/network-scripts/ifcfg-lo:0
DEVICE=lo:0
IPADDR=61.183.52.240
NETMASK=255.255.255.255
NETWORK=61.183.52.240
BROADCAST=61.183.52.240
ONBOOT=yes
NAME=loopback
++ for i in '$(eval echo {0..$1})'
++ eval 'ip=$VIP1'
+++ ip=61.183.52.250
++ cat
++ cat /etc/sysconfig/network-scripts/ifcfg-lo:1
DEVICE=lo:1
IPADDR=61.183.52.250
NETMASK=255.255.255.255
NETWORK=61.183.52.250
BROADCAST=61.183.52.250
ONBOOT=yes
NAME=loopback
++ cat
++ echo MODIFY_IP_FLAG
MODIFY_IP_FLAG
++ cat /etc/sysconfig/network
NETWORKING="yes"
HOSTNAME="cache11.cn109"
GATEWAY="61.183.52.247"
++ cat /etc/sysconfig/network-scripts/ifcfg-eth2
DEVICE=eth2
#HWADDR=6C:92:BF:04:06:24
BOOTPROTO="static"
TYPE="Ethernet"
IPADDR=61.183.52.211
NETMASK=255.255.255.128
ONBOOT=yes
RX_MAX=`ethtool -g "$DEVICE" | grep 'Pre-set' -A1 | awk '/RX/{print $2}'`
RX_CURRENT=`ethtool -g "$DEVICE" | grep "Current" -A1 | awk '/RX/{print $2}'`
[ "$RX_CURRENT" -lt "$RX_MAX" ] && ethtool -G "$DEVICE" rx "$RX_MAX"
++ cat /etc/sysconfig/network-scripts/ifcfg-bond0
cat: /etc/sysconfig/network-scripts/ifcfg-bond0: No such file or directory
++ cat /etc/resolv.conf
search tbsite.net
nameserver 8.8.8.8
nameserver 110.75.1.30
nameserver 114.114.114.114
options attempts:1 timeout:1
++ cat /etc/hosts
# Do not remove the following line, or various programs
# that require network functionality will fail.
127.0.0.1		localhost.localdomain localhost
110.75.20.129   yum.tbsite.net
61.183.52.211 cache11.cn109 cache11
  
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/08modify_rclocal.sh
+ progress 08modify_rclocal.sh 80
+ :
+ source /root/post/08modify_rclocal.sh
++ cp -p /etc/rc.local /etc/rc.local.bak
++ cat
++ wget -T3 -P /tmp/ http://10.120.109.155:8888/ngis/script/cdn_profile.sh
--2014-07-18 02:33:26--  http://10.120.109.155:8888/ngis/script/cdn_profile.sh
Connecting to 10.120.109.155:8888... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2767 (2.7K) [application/x-sh]
Saving to: `/tmp/cdn_profile.sh'

     0K ..                                                    100% 48.2K=0.06s

2014-07-18 02:33:26 (48.2 KB/s) - `/tmp/cdn_profile.sh' saved [2767/2767]

+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/09modify_chkconfig.sh
+ progress 09modify_chkconfig.sh 80
+ :
+ source /root/post/09modify_chkconfig.sh
++ modify_chkconfig
++ echo '::Modify chkconfig for the new system...'
::Modify chkconfig for the new system...
+++ chkconfig --list
+++ grep 0:
+++ awk '{print $1}'
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 DragoonAgent on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 abrt-ccpp off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 abrt-oops off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 abrtd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 acpid off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 atd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 avahi-daemon off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 cgconfig off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 cgred off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 cpuspeed off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 crond on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 haldaemon off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 ip6tables off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 ipmi on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 ipmievd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 iptables off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 irqbalance off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 kdump off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 libvirt-guests off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 lvm2-monitor off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 mdmonitor off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 messagebus off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 netconsole off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 netfs off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 network on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 nfs off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 nfslock off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 ntpd on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 ntpdate off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 postfix off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 psacct off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 quota_nld off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rdisc off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 restorecond off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcbind off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcgssd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcidmapd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 rpcsvcgssd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 rsyslog on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 saslauthd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 smartd off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=on
++ /sbin/chkconfig --level 345 sshd on
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 sysstat off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 udev-post off
++ for a in '`chkconfig --list|grep 0:|awk '\''{print $1}'\''`'
++ case "$a" in
++ STATUS=off
++ /sbin/chkconfig --level 345 wpa_supplicant off
++ echo '::End modify chkconfig'
::End modify chkconfig
++ mkdir /mnt/nfs
++ mount -o nolock 10.120.109.155:/home/ngis/nfs /mnt/nfs
++ SDIR=/mnt/nfs
++ wget -T3 -t2 -O /etc/ntp.conf http://10.120.109.155:8888/ngis/download/ntp.conf
++ wget -T3 -t2 -O /etc/sysctl.conf http://10.120.109.155:8888/ngis/download/sysctl.conf
++ wget -T3 -t2 -O /etc/sudoers http://10.120.109.155:8888/ngis/download/sudoers
++ wget -T3 -t2 -O /etc/modprobe.d/disable_ipv6.conf http://10.120.109.155:8888/ngis/download/disable_ipv6.conf
++ wget -nv -P /opt/ http://10.120.109.155:8888/ngis/download/taobao-repo-utils-1.1.0-23.noarch.rpm
++ echo CHKCONFIG_FLAG
CHKCONFIG_FLAG
++ rpm -ihv http://10.120.109.155:8888/ngis/download/staragent-1.1.2-el6.x86_64.rpm
Retrieving http://10.120.109.155:8888/ngis/download/staragent-1.1.2-el6.x86_64.rpm
Preparing...                ##################################################
	file /usr/alisys/dragoon/bin/AgentDownLoad from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/bin/AgentUpdate from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/bin/DragoonAgent from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/bin/agent.sh from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
	file /usr/alisys/dragoon/libexec/version.sh from install of staragent-1.1.2-el6.x86_64 conflicts with file from package staragent-1.0.5-el6.x86_64
++ rpm -ihv http://10.120.109.155:8888/ngis/download/hwconfig-1.16.8-2.noarch.rpm
Retrieving http://10.120.109.155:8888/ngis/download/hwconfig-1.16.8-2.noarch.rpm
Preparing...                ##################################################
hwconfig                    ##################################################
++ echo 'root    soft    nofile  65535
root    hard    nofile  65535
admin   soft    nofile  65535
admin   hard    nofile  65535'
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/13modify_postgres.sh
+ progress 13modify_postgres.sh 80
+ :
+ source /root/post/13modify_postgres.sh
++ HOST=cache11
++ ethtool -i eth0
++ grep ixg
++ ETHOOB=eth1
+++ echo 10.120.109.211
+++ awk -F. '{print $1"."$2"."$3".251"}'
++ RIP1=10.120.109.251
+++ echo 10.120.109.211
+++ awk -F. '{print $1"."$2"."$3".252"}'
++ RIP2=10.120.109.252
++ init_app
++ mkdir /root/.ssh
mkdir: cannot create directory `/root/.ssh': File exists
++ cat /mnt/nfs/system/root.id_rsa.pub
++ useradd -g 500 -u 500 admin
useradd: group '500' does not exist
++ useradd admin
++ mkdir -p /home/admin/.ssh/
++ cat /mnt/nfs/system/admin.id_rsa.pub
++ chown admin.admin /home/admin/.ssh/authorized_keys
++ grouplist='
	users:100
	logs:1338
	ads:1685
	audit:2914
	tbops:19001
	tbpe:19011
	tbdba:19021
	tbdevdba:19022
	tbnoc:19031
	tbdev:19051
	tbscm:19041
	tbtest:19061
	'
++ for i in '$grouplist'
+++ echo users:100
+++ cut -d : -f2
++ gid=100
+++ echo users:100
+++ cut -d : -f1
++ group=users
++ groupadd -g 100 users
groupadd: group 'users' already exists
++ for i in '$grouplist'
+++ echo logs:1338
+++ cut -d : -f2
++ gid=1338
+++ echo logs:1338
+++ cut -d : -f1
++ group=logs
++ groupadd -g 1338 logs
++ for i in '$grouplist'
+++ echo ads:1685
+++ cut -d : -f2
++ gid=1685
+++ echo ads:1685
+++ cut -d : -f1
++ group=ads
++ groupadd -g 1685 ads
++ for i in '$grouplist'
+++ echo audit:2914
+++ cut -d : -f2
++ gid=2914
+++ echo audit:2914
+++ cut -d : -f1
++ group=audit
++ groupadd -g 2914 audit
++ for i in '$grouplist'
+++ echo tbops:19001
+++ cut -d : -f2
++ gid=19001
+++ echo tbops:19001
+++ cut -d : -f1
++ group=tbops
++ groupadd -g 19001 tbops
++ for i in '$grouplist'
+++ echo tbpe:19011
+++ cut -d : -f2
++ gid=19011
+++ echo tbpe:19011
+++ cut -d : -f1
++ group=tbpe
++ groupadd -g 19011 tbpe
++ for i in '$grouplist'
+++ echo tbdba:19021
+++ cut -d : -f2
++ gid=19021
+++ echo tbdba:19021
+++ cut -d : -f1
++ group=tbdba
++ groupadd -g 19021 tbdba
++ for i in '$grouplist'
+++ echo tbdevdba:19022
+++ cut -d : -f2
++ gid=19022
+++ echo tbdevdba:19022
+++ cut -d : -f1
++ group=tbdevdba
++ groupadd -g 19022 tbdevdba
++ for i in '$grouplist'
+++ echo tbnoc:19031
+++ cut -d : -f2
++ gid=19031
+++ echo tbnoc:19031
+++ cut -d : -f1
++ group=tbnoc
++ groupadd -g 19031 tbnoc
++ for i in '$grouplist'
+++ echo tbdev:19051
+++ cut -d : -f2
++ gid=19051
+++ echo tbdev:19051
+++ cut -d : -f1
++ group=tbdev
++ groupadd -g 19051 tbdev
++ for i in '$grouplist'
+++ echo tbscm:19041
+++ cut -d : -f2
++ gid=19041
+++ echo tbscm:19041
+++ cut -d : -f1
++ group=tbscm
++ groupadd -g 19041 tbscm
++ for i in '$grouplist'
+++ echo tbtest:19061
+++ cut -d : -f2
++ gid=19061
+++ echo tbtest:19061
+++ cut -d : -f1
++ group=tbtest
++ groupadd -g 19061 tbtest
++ [[ cache11 = console* ]]
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/15modify_secure.sh
+ progress 15modify_secure.sh 80
+ :
+ source /root/post/15modify_secure.sh
++ echo SECURE_FLAG
SECURE_FLAG
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/16oob_os_init.sh
+ progress 16oob_os_init.sh 80
+ :
+ source /root/post/16oob_os_init.sh
+++ get_PN
++++ dmidecode -s system-product-name
++++ grep -v '^#'
++++ sed 's/ *$//g'
+++ PRONAME=NF5270M3
+++ '[' XNF5270M3 == X ']'
+++ echo NF5270M3
+++ grep -qi IBM
+++ echo -n NF5270M3
+++ return 0
++ Proname=NF5270M3
+++ get_SN
+++ dmidecode -s system-serial-number
+++ grep -v '^#'
+++ sed 's/ //g'
+++ echo
+++ grep -i ToBeFilled
++ SN=214202338
+++ get_MANU
+++ dmidecode -s system-manufacturer
+++ grep -v '^#'
+++ sed 's/ //g'
++ Manu=Inspur
++ get_TTYS
++ case $Proname in
++ FSBR=115200
++ CONSOLE=ttyS0
++ IPMILANCHANNEL=1
++ echo FSBR:115200
FSBR:115200
++ echo CONSOLE:ttyS0
CONSOLE:ttyS0
++ echo IPMILANCHANNEL:1
IPMILANCHANNEL:1
++ echo LICENSE:
LICENSE:
++ check_oob_input
++ '[' 115200 = 115200 -o 115200 = 57600 -o 115200 = 38400 -o 115200 = 19200 -o 115200 = 9600 ']'
++ '[' ttyS0 = ttyS0 -o ttyS0 = ttyS1 -o ttyS0 = xvc ']'
++ echo FSBR:115200
FSBR:115200
++ echo CONSOLE:ttyS0
CONSOLE:ttyS0
++ echo 'Now, initialize OS for OOB ...'
Now, initialize OS for OOB ...
++ echo rh62-x86-64
++ grep -q -i -E '(rh|AliOS)[56]'
++ '[' ALcache == '' ']'
++ init_os_grub
++ GRUBCFG=/boot/grub/grub.conf
++ '[' '!' -f /boot/grub/grub.conf ']'
++ sed -i 's/^\([ \t]*\)kernel\([ \t]\{1,\}\)\/vmlinuz/\1kernel \/vmlinuz/' /boot/grub/grub.conf
++ sed -i 's/^\([ \t]*\)kernel[ \t]\{1,\}\/vmlinuz\(.*\)xen/\1kernel  \/vmlinuz\2xen/' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/[ \t]\{1,\}console=ttyS[01],[0-9]\{1,\}[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/[ \t]\{1,\}console=tty0[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/[ \t]*rhgb[ \t]*quiet//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinu/s/\([ \t]*\)$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*com[0-9]=[0-9]*,[a-zA-Z0-9]*[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*com[0-9]=[0-9]*\([ \t]\|$\)/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*console=com[0-9],[a-zA-Z0-9]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/[ \t]*$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\}console=ttyS[0-9],[0-9]\{1,\}\([ \t]\|$\)/ /g' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\}console=[a-zA-Z0-9]\{1,\}[ \t]*/ /g' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\},[0-9]\{1,\}[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]\{1,\}xencons=[a-zA-Z0-9]\{1,\}[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]\{1,\}\/vmlinuz/s/[ \t]*$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel  \/vmlinuz.*xen.*/s/[ \t]*console=[a-zA-Z0-9]*[ \t]*/ /' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel  \/vmlinuz.*xen.*/s/[ \t]*$//' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel \/vmlinuz/s/$/ console=tty0 console=ttyS0,115200 /' /boot/grub/grub.conf
++ local COM_N
++ case ${CONSOLE} in
++ COM_N=com1
++ sed -i '/^[ \t]*kernel[ \t]*\/xen/s/$/ com1=115200,8n1 console=com1,vga/' /boot/grub/grub.conf
++ sed -i '/^[ \t]*module[ \t]*\/vmlinuz/s/$/ console=xvc xencons=xvc/' /boot/grub/grub.conf
++ sed -i '/^[ \t]*kernel  \/vmlinuz.*xen/s/$/ console=xvc0/' /boot/grub/grub.conf
++ sed -i 's/kernel  \/vmlinuz/kernel \/vmlinuz/' /boot/grub/grub.conf
++ init_os_inittab
++ echo rh62-x86-64
++ grep '^rh6'
rh62-x86-64
++ echo 'initctl start serial DEV=ttyS0 SPEED=115200'
++ echo 'rh62-x86-64 not need to modify inittab'
rh62-x86-64 not need to modify inittab
++ echo ttyS0
++ return 0
++ set_oob
++ ipmitool lan set 1 access on
++ ipmitool lan set 1 ipsrc static
++ ipmitool lan set 1 ipaddr 10.120.109.211
Setting LAN IP Address to 10.120.109.211
++ ipmitool lan set 1 netmask 255.255.255.0
Setting LAN Subnet Mask to 255.255.255.0
++ ipmitool user set name 3 taobao
Set User Name command failed (user 3, name taobao): Invalid data field in request
++ ipmitool user set password 3 9ijn0okm
Set User Password command failed (user 3): Invalid data field in request
++ ipmitool user enable 3
++ ipmitool user priv 3 4 1
++ ipmitool sol payload enable 1 3
++ ipmitool channel setaccess 1 3 callin=on ipmi=on link=on privilege=4
+++ ipmitool user list 1
+++ grep taobao
+++ awk '{if($1 !~ 3 )print $1}'
++ id=6
++ for i in '$id'
++ ipmitool user set password 6 9ijn0okm
++ sleep 2
++ echo INIT_OOB_OS_FLAG
INIT_OOB_OS_FLAG
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 crashkernel=auto console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.el6.x86_64.img
++ cat /etc/inittab
# inittab is only used by upstart for the default runlevel.
#
# ADDING OTHER CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.
#
# System initialization is started by /etc/init/rcS.conf
#
# Individual runlevels are started by /etc/init/rc.conf
#
# Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf
#
# Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,
# with configuration in /etc/sysconfig/init.
#
# For information on how to write upstart event handlers, or how
# upstart works, see init(5), init(8), and initctl(8).
#
# Default runlevel. The runlevels used are:
#   0 - halt (Do NOT set initdefault to this)
#   1 - Single user mode
#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)
#   3 - Full multiuser mode
#   4 - unused
#   5 - X11
#   6 - reboot (Do NOT set initdefault to this)
# 
id:3:initdefault:
++ cat /etc/securetty
console
vc/1
vc/2
vc/3
vc/4
vc/5
vc/6
vc/7
vc/8
vc/9
vc/10
vc/11
tty1
tty2
tty3
tty4
tty5
tty6
tty7
tty8
tty9
tty10
tty11
ttyS0
++ echo rate=115200
++ echo console=ttyS0
++ echo 115200
++ grep ERROR
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/17HTconfig.sh
+ progress 17HTconfig.sh 80
+ :
+ source /root/post/17HTconfig.sh
++ URL=http://yum.corp.taobao.com/aliyun/5Server/x86_64/server/hardware/tool/
++ ping -c2 -w4 yum.corp.taobao.com
ping: unknown host yum.corp.taobao.com
++ URL=http://10.120.109.155:8888/ngis/download
+++ get_PN
++++ dmidecode -s system-product-name
++++ grep -v '^#'
++++ sed 's/ *$//g'
+++ PRONAME=NF5270M3
+++ '[' XNF5270M3 == X ']'
+++ echo NF5270M3
+++ grep -qi IBM
+++ echo -n NF5270M3
+++ return 0
++ Proname=NF5270M3
+++ get_MANU
+++ dmidecode -s system-manufacturer
+++ grep -v '^#'
+++ sed 's/ //g'
++ Manu=Inspur
++ [[ Xcache11 = \X ]]
++ [[ cache11 =~ lvs ]]
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/18udev_net_rules.sh
+ progress 18udev_net_rules.sh 80
+ :
+ source /root/post/18udev_net_rules.sh
+++ lspci
+++ grep -i net
+++ wc -l
++ AN=4
++ ANN=3
++ i=0
++ TE=0
++ '[' 0 -le 3 ']'
++ ifconfig eth0
++ ethtool -i eth0
++ grep ixg
++ i=1
++ '[' 1 -le 3 ']'
++ ifconfig eth1
++ ethtool -i eth1
++ grep ixg
++ i=2
++ '[' 2 -le 3 ']'
++ ifconfig eth2
++ ethtool -i eth2
++ grep ixg
driver: ixgbe
++ TE=1
++ i=3
++ '[' 3 -le 3 ']'
++ ifconfig eth3
++ ethtool -i eth3
++ grep ixg
driver: ixgbe
++ TE=2
++ i=4
++ '[' 4 -le 3 ']'
++ GE=2
++ GEN=1
++ echo rh62-x86-64
++ grep 'rh6[0-9]'
rh62-x86-64
++ '[' XYES == XYES ']'
++ :
++ ethtool -i eth0
++ grep ixg
++ i=0
++ '[' 0 -le 1 ']'
+++ expr 0 + 2
++ n=2
++ udev_name=eth2
++ echo eth2
eth2
+++ ifconfig eth0
+++ grep eth0
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:05:e1:b1
++ '[' X6c:92:bf:05:e1:b1 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:05:e1:b1", ATTR{type}=="1", KERNEL=="eth*", NAME="eth2"'
++ i=1
++ '[' 1 -le 1 ']'
+++ expr 1 + 2
++ n=3
++ udev_name=eth3
++ echo eth3
eth3
+++ ifconfig eth1
+++ grep eth1
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:05:e1:b0
++ '[' X6c:92:bf:05:e1:b0 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:05:e1:b0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth3"'
++ i=2
++ '[' 2 -le 1 ']'
++ i=2
++ '[' 2 -le 3 ']'
+++ expr 2 - 2
++ n=0
++ udev_name=eth0
++ echo eth0
eth0
+++ ifconfig eth2
+++ grep eth2
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:04:06:24
++ '[' X6c:92:bf:04:06:24 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:04:06:24", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"'
++ i=3
++ '[' 3 -le 3 ']'
+++ expr 3 - 2
++ n=1
++ udev_name=eth1
++ echo eth1
eth1
+++ ifconfig eth3
+++ grep eth3
+++ awk '{print $5}'
+++ tr A-Z a-z
++ udev_mac=6c:92:bf:04:06:25
++ '[' X6c:92:bf:04:06:25 '!=' X ']'
++ echo 'SUBSYSTEM=="net", ACTION=="add", ATTR{address}=="6c:92:bf:04:06:25", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"'
++ i=4
++ '[' 4 -le 3 ']'
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/19sm843_fwupdate.sh
+ progress 19sm843_fwupdate.sh 80
+ :
+ source /root/post/19sm843_fwupdate.sh
++ wget -q -P /tmp/ http://10.120.109.155:8888/ngis/download/hdparm
++ HDPARM=/tmp/hdparm
++ chmod +x /tmp/hdparm
++ new_fw_version=DXM04D1Q
++ MEGACLI=/opt/MegaRAID/MegaCli/MegaCli64
++ NEED_UPDATA=false
++ IS_AHCI=false
++ IS_MEGARAID=false
++ /sbin/lspci
++ grep MegaRAID
++ '[' 1 -eq 0 ']'
+++ lsscsi
+++ grep sda
+++ awk -F: '{print $1}'
++ scsi_host='[7]'
++ /usr/bin/lsscsi -H
++ grep '[7]'
++ grep ahci
++ '[' 1 -eq 0 ']'
++ fw_update
++ fw_check
++ false
++ false
++ wget -q -P /tmp http://10.120.109.155:8888/ngis/download/samsung_sm843_ssd_fw/DXM04D1Q_NF_0729.bin
++ FWPATH=/tmp/DXM04D1Q_NF_0729.bin
++ rpm -ivh http://10.120.109.155:8888/ngis/download//samsung_sm843_ssd_fw/storcli-1.01.10-1.noarch.rpm
++ STROCLI=/opt/MegaRAID/storcli/storcli64
++ false
++ false
++ fw_check
++ false
++ false
++ exitall
++ rm -rf /tmp/DXM04D1Q_NF_0729.bin
++ rpm -ql storcli-1.01.10-1.noarch
++ '[' 0 -eq 0 ']'
++ rpm -e storcli-1.01.10-1.noarch
++ rm -rf /tmp/hdparm
+ '[' -e /tmp/install_E_flag ']'
+ for i in '`ls /root/post/[0-9]*.sh`'
++ basename /root/post/99clean.sh
+ progress 99clean.sh 80
+ :
+ source /root/post/99clean.sh
++ rm -f /etc/ssh/ssh_host_dsa_key /etc/ssh/ssh_host_key /etc/ssh/ssh_host_rsa_key /etc/ssh/ssh_host_dsa_key.pub /etc/ssh/ssh_host_key.pub /etc/ssh/ssh_host_rsa_key.pub /var/cfengine/cfengine_lock_db /root/backup/slcn_start.sh
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ for i in cron anaconda.syslog kern messages secure
++ cat /etc/init.d/DragoonAgent
#!/bin/sh
#****************************************************************#
# ScriptName: DragoonInit.sh
# Author: Exp 
# Create Date: 2009-12-20
# Modify Author: 
# Modify Date: 2009-12-20
# Function: DragoonAgent for chkconfig 
#***************************************************************#

# DragoonAgent          Start/Stop the DragoonAgent daemon.
#
# chkconfig: 2345 20 80
# description: DragoonAgent is a standard Monitoring UNIX program for alibaba
# processname: DragoonAgent
# config: 
# pidfile: /usr/alisys/dragoon/var/DragoonAgent.pid

# Source function library
. /etc/rc.d/init.d/functions

RETVAL=0
ARGS=""
prog="DragoonAgent"
CONFIG=
DRAGOONAGENT_HOME=/usr/alisys/dragoon
DRAGOONAGENT_OWNER=root

start () {
	/usr/alisys/dragoon/bin/agent.sh  start
}
stop () {
	/usr/alisys/dragoon/bin/agent.sh  stop
}


case "$1" in
  start)
		start
        ;;
  stop)
		stop
        ;;
  status)
        status $prog
        ;;
  restart|reload)
        stop
        sleep 1
        start
        ;;
  *)
        echo $"Usage: $0 {start|stop|status|restart|reload}"
        exit 3
esac

exit $?

++ crontab -r
no crontab for root
++ :
++ rm -rf /root/backup
++ mkdir -p /root/backup/
++ :
++ yum clean all
Loaded plugins: security
Cleaning repos: alibase.6Server.noarch alibase.6Server.x86_64 ops.6Server.noarch
              : ops.6Server.x86_64 redhat.6Server.base.x86_64
              : redhat.6Server.updates.x86_64
Cleaning up Everything
++ rm -f /usr/local/sbin/cronolog
++ rm -f /usr/local/sbin/cronosplit
++ sed -i /yum.alidc.net/d /etc/hosts
++ touch /root/backup/dnsupdate
++ rm -fr /var/lib/rpm/__db.001 /var/lib/rpm/__db.002 /var/lib/rpm/__db.003 /var/lib/rpm/__db.004
++ rpm -v --rebuilddb
++ echo CLEAN_FLAG
CLEAN_FLAG
++ sed -i 's/^hiddenmenu/#hiddenmenu/' /boot/grub/grub.conf
++ sed -i 's/^splashimage/#splashimage/' /boot/grub/grub.conf
++ cat /boot/grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
#hiddenmenu
title Red Hat Enterprise Linux Server (2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 crashkernel=auto console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.23.2.ali878.tcp1.34.el6.x86_64.img
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
	root (hd0,0)
	kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=LABEL=/ rd_NO_LUKS  KEYBOARDTYPE=pc KEYTABLE=us LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 rd_NO_LVM rd_NO_DM numa=off biosdevname=0 console=tty0 console=ttyS0,115200 
	initrd /initramfs-2.6.32-220.el6.x86_64.img
++ sed -i /timeout=120/d /etc/yum.conf
++ rm -f '/etc/resolv.conf.predhclient*'
++ rpm -qa
++ wc -l
707
+ '[' -e /tmp/install_E_flag ']'
+ cp -f /root/214202338 /var/clone/
+ cp -f /root/cloneinfo /var/clone/
+ mv -f /root/install_warn.log /var/clone/
mv: cannot stat `/root/install_warn.log': No such file or directory
+ rm -rf /root/post/
+ mv -f /root/post.tgz /var/clone/
+ rm -rf /root/.oob/
++ '[' -e /mnt/sysimage/tmp/install_E_flag ']'
++ progress chroot_post_ok 85
++ :
++ rm -f /mnt/sysimage/rh62-x86-64.tgz
++ echo 'the install time is:'
the install time is:
++ date
Thu Jul 17 14:33:49 EDT 2014
++ mkdir -p /mnt/sysimage/var/clone/
++ cp -f /root/install.log /mnt/sysimage/var/clone/
