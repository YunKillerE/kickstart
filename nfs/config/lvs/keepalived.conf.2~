global_defs {
#   notification_email {
#     hegen@taobao.com
#   }
#   notification_email_from hegen@taobao.com
#   smtp_server 192.168.200.1
#   smtp_connect_timeout 40
}

#
# Active VIP for image/www/assets service on the first LVS
#
vrrp_instance VI_1 {
    state SLAVE
    interface bond0
    virtual_router_id 201
    priority 100
    preempt_delay 180 
    advert_int 1
    authentication {
        auth_type PASS
        auth_pass 1111
    }
    virtual_ipaddress {
        112.25.59.240
    }
}

#
# Active VIP for image/www/assets service on the second LVS
#
vrrp_instance VI_2 {
    state SLAVE
    interface bond0
    virtual_router_id 93
    preempt_delay 180
    priority 100
    advert_int 1
    authentication {
        auth_type PASS
        auth_pass 1111
    }
    virtual_ipaddress {
        112.25.59.250
    }
}

virtual_server_group image {
    112.25.59.240 80
    112.25.59.250 80
}

virtual_server group image {
    delay_loop 7
    lb_algo wlc
    lb_kind DR 
    protocol TCP

    real_server 112.25.59.161 80 {
     weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.162 80 { 
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.163 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.164 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.165 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.166 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.167 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.168 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.169 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.170 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.171 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.172 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.173 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.174 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.175 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.176 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.177 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.178 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.179 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.180 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.181 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
    real_server 112.25.59.182 80 {
        weight 100
        TCP_CHECK {
            connect_timeout 5
        }
    }
}
